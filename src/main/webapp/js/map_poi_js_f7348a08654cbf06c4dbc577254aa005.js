define("common/util/util",[],function(){"use strict";return{getInstance:function(t,e){switch(e=e||[],e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);default:for(var i=[],n=0,a=e.length;n<a;n++)i.push("arguments["+n+"]");return new Function("return new this("+i.join(",")+");").apply(t,e)}},extend:function(t,e){$.extend(!0,t,e,t)},getStarHtml:function(t,e,i,n){t=Math.floor(t)/2;for(var a=[],o=1;o<=5;o++)t>=o?a.push(e):t+1>o?a.push(i):a.push(n);return a.join("")}}}),define("common/lang/aop",[],function(){"use strict";var t=function(t,i,n,a){var o,r,s=$.isFunction(t);if(s?(o=t,a=n,n=i):o=t[i],r=o,$.isFunction(n)){r=e(n,r,1);for(var c in o)r[c]=o[c]}if($.isFunction(a)){r=e(r,a,0);for(var c in o)r[c]=o[c]}return s||(t[i]=r),r},e=function(t,e,i){return function(){var n=t.apply(this,arguments),a=e.apply(this,arguments);return 0==i?n:a}},i=function(e,i,n){return t(e,i,n,null)},n=function(e,i,n){return t(e,i,null,n)},a=function(e,i,n,a){return t(e,i,n,a)};return{before:i,after:n,wrapper:a}}),define("common/lang/oo-static",["../util/util"],function(t){"use strict";return function(){t.extend(this,{getStatic:function(t){return t?this[t]:this},setStatic:function(e,i){return 1===arguments.length?t.extend(this,e):this[e]=i,this}}),this.implement({getStatic:function(t){return this.constructor.getStatic.apply(this.constructor,arguments)},setStatic:function(t,e){return this.constructor.setStatic.apply(this.constructor,arguments),this},callStatic:function(t,e){return this.getStatic(t).apply(this.constructor,e)}})}}),define("common/lang/oo",["../util/util","./aop","./oo-static"],function(t,e,i){"use strict";var n=function(t){var e=function(){};return e.prototype=t,new e},a=function(e,i,n){e?"function"!=typeof e&&(n=i,i=e,e=c):e=c;var a=o(e,function(){return this instanceof a?a.superclass.prototype.constructor.apply(this,arguments):t.getInstance(a,arguments)});return r(a,i),t.extend(a,e),t.extend(a,n),a.superclass=e,a},o=function(t,e){return e.prototype=n(t.prototype),e.prototype.constructor=e,e},r=function(t,e){for(var i in e)if(e[i]instanceof Function&&"callSuper"!==i&&"callParent"!==i){var n=s(i,t,e[i]);t.prototype[i]=n}else t.prototype[i]=e[i]},s=function(t,i,n){var a,o=e.wrapper(n,function(){a=this.__caller,this.__caller=o},function(){void 0===a?delete this.__caller:this.__caller=a});return o.__name=t,o.__owner=i,o},c=a(function(){this.init.apply(this,arguments)},{init:function(t){this.lang=t&&t.lang||this.lang},callParent:function(t){var e=Array.prototype.slice.call(arguments);return this.__caller.__owner.superclass.prototype[e.shift(0)].apply(this,e)},callSuper:function(){return this.__caller.__owner.superclass.prototype[this.__caller.__name].apply(this,arguments)},before:function(t,i){return e.before(this,t,s(t,this.constructor,function(){return i.apply(this,arguments)})),this},after:function(t,i){return e.after(this,t,s(t,this.constructor,function(){return i.apply(this,arguments)})),this}},{createClass:function(t,e){return a.apply(this,Array.prototype.concat.apply([this],arguments))},implement:function(t){return r(this,t),this},plugin:function(t,e){return t instanceof Function&&t.apply(this,e),this}}).plugin(i),l={Parent:c,createClass:a};return l}),define("common/lang/oo-event",["./aop"],function(t){"use strict";var e={getEventproxy:function(){return $(this)},bind:function(t,e){var i=this.getEventproxy();return i.bind.apply(i,arguments),this},unbind:function(t,e){var i=this.getEventproxy();return i.unbind.apply(i,arguments),this},on:function(){return this.bind.apply(this,arguments)},off:function(){return this.unbind.apply(this,arguments)},one:function(e,i){var n=arguments[1]=t.before(arguments[1],function(){this.unbind(e,n)});return this.bind.apply(this,arguments),this},trigger:function(t,e){var i=this.getEventproxy();return i.trigger.apply(i,arguments),this}};return e}),define("common/lang/i18n",[],function(){"use strict";var t={lang:"zh",i18n:function(t){return this.callStatic("getI18n",[this.lang,t])}},e={i18n_key:"i18n",lang:"zh",i18n:function(t,e){1===arguments.length&&(e=t,t=this.lang);var i=this.getStatic(this._i18n_key)||{};return i[t]=e,this.setStatic(this._i18n_key,i),this},getI18n:function(t,e){var i=(this.getStatic(this._i18n_key)||{})[t];return e?i[e]:i}};return function(){this.implement(t),this.setStatic(e)}}),define("common/widget/widget",["../lang/oo","../lang/oo-event","../lang/i18n"],function(t,e,i){return t.createClass({$el:null,_event_alias:"__widget",init:function(t){this.callSuper.apply(this,arguments),this.setAttrs(t||{}),this.delegateEvents(this.events),this.delegateEvents(t.events)},setAttrs:function(t,e){1===arguments.length&&(e=t,t=this.getStatic("ATTRS")),this._setAttrs(t,e)},_setAttrs:function(t,e){$.each(t,this.proxy(function(t,i){this.setAttr(t,e[t])}))},setAttr:function(t,e){e="undefined"==typeof e?this.getStatic("ATTRS")[t]:e,e="$"===t.charAt(0)?$(e):e,this[t]=e},$:function(t){return t?$(t,this.$el):this.$el},delegateEvents:function(t){return t&&$.each(t,$.proxy(function(t,e){this.delegateEvent.apply(this,e)},this)),this},delegateEvent:function(t,e,i){return t&&e&&(e="string"==typeof e&&$.isFunction(this[e])?$.proxy(this[e],this):$.proxy(e,this),this.$el.on(t+"."+this._event_alias,$.isFunction(i)?i.call(this):i,e)),this},undelegateEvents:function(){this.$el.off("."+this._event_alias)},proxy:function(t){return Array.prototype.splice.call(arguments,1,0,this),$.proxy.apply($,arguments)},destroy:function(){this.undelegateEvents();for(var t in this)if(this.hasOwnProperty(t)){if(this[t]&&$.isFunction(this[t].destroy))try{this[t].destroy()}catch(e){}delete this[t]}}},{ATTRS:{$el:document.body}}).implement(e).plugin(i)}),function(t,e){var i=e(t);if("function"==typeof define&&define.amd)define("common/util/template/template",[],function(){return i});else if("object"==typeof exports)module.exports=i;else{var n=t.template;i.noConflict=function(){return t.template===i&&(t.template=n),i},t.template=i}}(this,function(t){"use strict";function e(t){if(null===t)return"null";var e=typeof t;if("object"!==e)return e;var i=y.call(t).slice(8,-1).toLowerCase();return"object"!==i?i:t.constructor==Object?i:"unkonw"}function i(t){return"object"===e(t)}function n(t){return"function"===e(t)}function a(t){return"string"===e(t)}function o(){for(var t=arguments[0]||{},e=b.call(arguments,1),i=e.length,n=0;n<i;n++){var a=e[n];for(var o in a)t[o]=a[o]}return t}function r(){var t=b.call(arguments);return o.apply(null,[{}].concat(t))}function s(t){return t}function c(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(t){return t.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")}function u(t,e){"undefined"!=typeof console&&console[t]&&console[t](e)}function d(t){function e(){return"template.js error"}var i="template.js error\n\n";for(var n in t)i+="<"+n+">\n"+t[n]+"\n\n";return i+="<message>\n"+t.message+"\n\n",u("error",i),m.error(t),e.toString=function(){return'__code__ = "template.js error"'},e}function p(t,e){function i(t){return t=t.replace(/('|")/g,"\\$1").replace(/\n/g," "),';__code__ += ("'+t+'")\n'}function n(t){var e,i,n,o=/^(?:=|:(.*?)=)(.*)$/;return(i=o.exec(t))?(e=i[2],n=a(i[1])?i[1]:c?"h":"",';__code__ += __modifierMap__["'+n+'"](typeof ('+e+') !== "undefined" ? ('+e+') : "")\n'):";"+t+"\n"}for(var o="",r=e.sTag,s=e.eTag,c=e.escape,l=t.split(r),u=0,d=l.length;u<d;u++){var p=l[u].split(s);1===p.length?o+=i(p[0]):(o+=n(p[0],!0),p[1]&&(o+=i(p[1])))}return o}function h(t,e){var i=p(t,e),n='\n    var html = (function (__data__, __modifierMap__) {\n        var __str__ = "", __code__ = "";\n        for(var key in __data__) {\n            __str__+=("var " + key + "=__data__[\'" + key + "\'];");\n        }\n        eval(__str__);\n\n',a="\n        ;return __code__;\n    }(__data__, __modifierMap__));\n    return html;\n",o=n+i+a;o=o.replace(/[\r]/g," ");try{var r=new Function("__data__","__modifierMap__",o);return r.toString=function(){return i},r}catch(s){throw s.temp="function anonymous(__data__, __modifierMap__) {"+o+"}",s}}function f(t,e){function i(i){i=r(v,i);try{var a=n(i,_);return a=e.compress?l(a):a}catch(o){return o.name="RenderError",o.tpl=t,o.render=n.toString(),d(o)()}}e=r(m,e);try{var n=h(t,e)}catch(a){return a.name="CompileError",a.tpl=t,a.render=a.temp,delete a.temp,d(a)}return i.toString=function(){return n.toString()},i}function g(t,e){if("string"!=typeof t)return"";var n=f(t);return i(e)?n(e):n}var m={sTag:"<%",eTag:"%>",compress:!1,escape:!0,error:function(t){}},v={},_={"":function(t){return s(t)},h:function(t){return c(t)},u:function(t){return encodeURI(t)}},y={}.toString,b=[].slice;return g.config=function(t){return i(t)&&(m=o(m,t)),r(m)},g.registerFunction=function(t,e){return a(t)?n(e)?v[t]=e:v[t]:r(v)},g.unregisterFunction=function(t){return!!a(t)&&(delete v[t],!0)},g.registerModifier=function(t,e){return a(t)?n(e)?_[t]=e:_[t]:r(_)},g.unregisterModifier=function(t){return!!a(t)&&(delete _[t],!0)},g.__encodeHTML=c,g.__compress=l,g.__handelError=d,g.__compile=f,g.version="0.7.0",g}),define("common/util/template",["./util","./template/template"],function(t){return template.registerFunction("comm_poi_getstar",function(){return t.getStarHtml.apply(t,arguments)}),{registerFunction:template.registerFunction,render:function(t,e){return template(t,e||{})}}}),define("common/widget/tpls",[],function(){"use strict";return window.__citymap=function(){return PLACE&&"city"http://common1.qyerstatic.com/place/js/map/==PLACE.TYPE?"citymap":"poimap"},window.__obj={cate151:"place-"+window.__citymap()+"-visit-cat-sight",cate152:"place-"+window.__citymap()+"-visit-cat-entertainment",cate153:"place-"+window.__citymap()+"-visit-cat-games",cate154:"place-"+window.__citymap()+"-visit-cat-outdoors",cate155:"place-"+window.__citymap()+"-visit-cat-plan",cate156:"place-"+window.__citymap()+"-visit-cat-activities",cate147:"place-"+window.__citymap()+"-visit-cat-shopping"},window.__type=function(){var t=$("http://common1.qyerstatic.com/place/js/map/div.qmap-tar ul.nav .on").attr("data-id");switch(t){case"fun":return"visit";case"hotel":return"hotel";case"food":return"food";default:return"visit"}},window.__doCardTrackCode=function(t){qyerUtil.doTrackCode("place-"+window.__citymap()+"-"+window.__type()+"-mapcard-small-more")},window.__doListTrackCode=function(t){qyerUtil.doTrackCode("place-"+window.__citymap()+"-"+window.__type()+"list-"+t)},window.__doListFavTrackCode=function(t){qyerUtil.doTrackCode("place-"+window.__citymap()+"-"+window.__type()+"list-favorite")},window.__doStarTrack=function(){qyerUtil.doTrackCode("place-"+window.__citymap()+"-"+window.__type()+"-cat-all")},window.__getTagTrack=function(t){if("visit"==window.__type())return window.__obj["cate"+t];switch(t){case 1:return"place-"+window.__citymap()+"-hotel-cat-lowstar";case 2:return"place-"+window.__citymap()+"-hotel-cat-midstar";case 3:return"place-"+window.__citymap()+"-hotel-cat-highstar"}},window.__doTagTrack=function(t){qyerUtil.doTrackCode(window.__getTagTrack(t))},window.__callback=function(){qyerUtil.doTrackCode("place-"+window.__citymap()+"-"+window.__type()+"-mapcard-big-favorite")},{poiListTpl:'<%if(!data.res[0].hotel_id){%>\t\t    <%var _data = data.res,length = _data.length;%>\t\t    <%for(var i=0;i<length;i++){%>\t\t    <li class="qmap-poiList-item" onclick="window.__doListTrackCode(<%=i%>)" data-id="<%=_data[i].id%>">\t\t        <div class="cursor-pointer"><h3><span class="qui-ellipsis"><%:=(_data[i].chinesename?_data[i].chinesename+"&nbsp;&nbsp;&nbsp;":"")%><%=(_data[i].englishname||"")%></span></h3>\t\t            <%if(_data[i]["tags"].length>0){var _length = _data[i]["tags"].length;%>\t\t                <ul class="tags">\t\t                    <%for(var n=0;n<_length;n++){%>\t\t                        <li><%:=_data[i]["tags"][n].catename%></li>\t\t                    <%}%>\t\t                </ul>\t\t            <%}%>\t\t            <%if(_data[i].rank&&_data[i].rank!=9999999){%>\t\t\t\t\t<div class="allRank"><%=_data[i].category_name%>排名:<span>No.<%=_data[i].rank%></span>/<%=_data[i].count%></div>\t\t            <%}%></div>\t\t            <%if(_data[i].hotel_count&&window.__curTag=="fun"){%>\t\t            <a href="<%=_data[i].hotel_url%>" onclick="window.__doListTrackCode(\'book\')" target="_blank" class="price cursor-pointer">周边 <b><%=_data[i].hotel_count%></b>家酒店<span class="btn btn-blue-hollow">查看</span></a>\t\t            <%}%>\t\t        <div data-poiId="<%=_data[i].id%>" onclick="window.__doListTrackCode(\'favorite\')" class="js-favorite-btn favorite fe-place-iconfont icon-place-heart<%if((_data[i].planto!=0)&&_data[i].planto){%>-fill<%}%>"></div>\t\t        <div class="pin fe-place-iconfont icon-place-pin"><span><%=i+1%></span></div>\t\t    </li>\t\t    <%}%>\t\t<%}else{%>\t\t    <%var _data = data.res,length = _data.length,level = {1:"一",2:"二",3:"三",4:"四",5:"五"}%>\t\t    <%for(var i=0;i<length;i++){%>\t\t    <li class="qmap-poiList-item" data-bn-ipg="place-'+window.__citymap()+'-hotellist-<%=i%>" data-id="<%=_data[i].hotel_id%>">\t\t        <div class="cursor-pointer">\t\t\t        <h3 class="qui-ellipsis"><%=_data[i].hotel_chinesename||_data[i].hotel_englishname%></h3>\t\t\t        <%if(_data[i].hotel_chinesename&&_data[i].hotel_englishname){%>\t\t\t        <h4 class="qui-ellipsis"><%=_data[i].hotel_englishname%></h4>\t\t\t        <%}%>\t\t\t        <%if(_data[i].hotel_index){%>\t\t\t        <div class="rank"><span><%=level[_data[i].hotel_qyer_star]%>星级</span><span class="separator"></span>酒店排名 <b>No.<%=_data[i].hotel_rank%></b>/<%=_data[i].hotel_count%></div>\t\t\t        <%}%>\t\t\t\t</div>\t\t        <%if(_data[i].hotel_price_discount){%>\t\t        <a href="<%=_data[i].hotel_booking_url%>" target="_blank"  onclick="window.__doListTrackCode(\'book\')" class="price price-hotel">\t\t            <span class="discount">-<%=_data[i].hotel_price_discount%>%</span>\t\t            <span class="original separation"><del><%=_data[i].hotel_reference_price%></del>元</span>\t\t            <b><%=_data[i].hotel_price%></b>元<span class="btn btn-blue">预订</span>\t\t        </a>\t\t        <%}else{%>\t\t        <div class="price price-hotel">\t\t            <b><%=_data[i].hotel_price%></b>元<a href="<%=_data[i].hotel_booking_url%>" target="_blank" class="btn btn-blue">预订</a>\t\t        </div>\t\t        <%}%>\t\t        <div class="pin fe-place-iconfont icon-place-pin"><span><%=i+1%></span></div>\t\t    </li>\t\t    <%}%>\t\t<%}%>',cardTpl:'<%if(data.type=="fun"){%>\t\t    <div class="qmap-card detail type-fun">\t\t\t    <a href="<%=data.url%>" target="_blank" onclick="qyerUtil.doTrackCode(\'place-'+window.__citymap()+'-visit-mapcard-big-more\')">\t\t\t        <span class="arrow fe-place-iconfont">&#xe650;</span>\t\t\t        <h3><b><%=(data.chinesename||data.englishname)%></b></h3>\t\t\t        <div class="clearfix">\t\t\t            <%if(data.photo.length>0||data.introduction){%>\t\t\t\t            <ul class="img-list">\t\t\t\t                <%for(var i=0;i<data.photo.length;i++){%>\t\t\t\t                    <li><img src="<%=data.photo[i]%>"></li>\t\t\t\t                <%}%>\t\t\t\t                    <li class="introduction">\t\t\t\t                    <%if(data.introduction){%>\t\t\t\t                        <div class="firstP place-ellipsis-clamp place-clamp3"><%:=data.introduction%></div>\t\t\t\t                    <%}%>\t\t\t\t                        <p class="moreP"><span class="more">查看详情</span></p>\t\t\t\t                    </li>\t\t\t\t            </ul>\t\t\t            <%}%>\t\t\t            <%if(data.discount.length>0||data.hotel.length!=0){%>\t\t\t            <ul class="discount-list">\t\t\t                <%if(data.hotel.length!=0){%>\t\t\t                <li>\t\t\t                \t<a href="<%=data.hotel.url%>" target="_blank" onclick="qyerUtil.doTrackCode(\'place-'+window.__citymap()+'-visit-mapcard-big-book\')">\t\t\t\t                    <span class="btn btn-blue">查看</span>\t\t\t\t                    <span class="price">\t\t\t\t                        <b><%:=data.hotel.price%></b>元起\t\t\t\t                    </span>\t\t\t\t                    <h4 class="title tip">\t\t\t\t                        <em><%=data.hotel.percent%>%穷游er住附近</em>\t\t\t\t                        <span class="title-text">\t\t\t\t                            周边<%=data.hotel.nearby_hotel_count%>家酒店\t\t\t\t                        </span>\t\t\t\t                    </h4>\t\t\t                    </a>\t\t\t                </li>\t\t\t                <%}%>\t\t\t                <%for(var i=0;i<data.discount.length;i++){%>\t\t\t                <li>\t\t\t                \t<a href="<%=data.discount[i].url%>" target="_blank" onclick="qyerUtil.doTrackCode(\'place-'+window.__citymap()+'-visit-mapcard-big-lm\')">\t\t\t\t                    <span class="btn btn-red">预订</span>\t\t\t\t                    <span class="price">\t\t\t\t                        <%:=data.discount[i].price%>\t\t\t\t                    </span>\t\t\t\t                    <h4 class="title">\t\t\t\t                        <span class="fe-place-iconfont">&#xe65f;</span>\t\t\t\t                        <span class="title-text">\t\t\t\t                            <%:=data.discount[i].title%>\t\t\t\t                        </span>\t\t\t\t                    </h4>\t\t\t                    </a>\t\t\t                </li>\t\t\t                <%}%>\t\t\t            </ul>\t\t\t            <%}%>\t\t\t        </div>\t\t        </a>\t\t        <span data-poiId="<%=data.id%>" onclick="window._addToPlan(this,window.__callback)" class="js-favorite-btn favorite fe-place-iconfont icon-place-heart<%if((data.planto!=0)&&data.planto){%>-fill<%}%>"></span>\t\t    </div>\t\t    <%}else if(data.type=="hotel"){%>\t\t        <div class="qmap-card detail type-hotel">\t\t        <a href="<%=data.hotel_booking_url%>" onclick="qyerUtil.doTrackCode(\'place-'+window.__citymap()+'-hotel-mapcard-big-book\')" target="_blank">\t\t\t        <span class="arrow fe-place-iconfont">&#xe650;</span>\t\t\t        <h3>\t\t\t        <%if(data.chinesename){%>\t\t\t            <b style="margin-right:10px;"><%=data.chinesename%></b>\t\t\t        <%}if(data.englishname){%>\t\t\t        <span><%=data.englishname%></span>\t\t\t        <%}%>\t\t\t        </h3>\t\t\t        <%if(data.hotel_photo.length>0){%>\t\t\t        <div class="clearfix">\t\t\t            <ul class="img-list">\t\t\t            <%for(var i=0;i<data.hotel_photo.length;i++){%>\t\t\t                <li>\t\t\t                    <img src="<%=data.hotel_photo[i]%>"/>\t\t\t                </li>\t\t\t            <%}%>\t\t\t            </ul>\t\t\t        </div>\t\t\t        <%}if(data.nearby_poi&&data.nearby_poi.length>0){%>\t\t\t        <h4 class="near-title">\t\t\t            周边:\t\t\t        </h4>\t\t\t        <ul class="near-list clearfix">\t\t\t            <%for(var i=0;i<data.nearby_poi.length;i++){%>\t\t\t            <li>\t\t\t                <%=(data.nearby_poi[i].chinesename||data.nearby_poi[i].englishname)%>（<%=(data.nearby_poi[i].distance>1000?(data.nearby_poi[i].distance/1000).toFixed(1)+"km":data.nearby_poi[i].distance+"m")%>）\t\t\t            </li>\t\t\t            <%}%>\t\t\t        </ul>\t\t\t        <%}%>\t\t\t        <ul class="discount-list">\t\t\t            <li>\t\t\t                <div class="price">\t\t\t                  <%if(data.hotel_price_discount){%><span class="square-red">-<%=data.hotel_price_discount%>%</span>\t\t\t                  <%}%>\t\t\t                  <%if(data.hotel_price_discount&&data.hotel_reference_price){%><span><del class="linethrough"><%=data.hotel_reference_price%></del>元</span><span class="separator"></span><%}%>\t\t\t                  <span><b><%=data.hotel_price%></b>元</span>\t\t\t                  <span class="ui_buttonA btn">前往<i class="site">Booking.com</i>预订</span>\t\t\t                </div>\t\t\t            </li>\t\t\t        </ul>\t\t        </a>\t\t    </div>\t\t    <%}else if(data.type=="food"){%>\t\t        <div class="qmap-card detail type-food">\t\t        \t<a href="<%=data.url%>" onclick="qyerUtil.doTrackCode(\'place-'+window.__citymap()+'-food-mapcard-big-more\')" target="_blank">\t\t            <span class="arrow fe-place-iconfont">&#xe650;</span>\t\t            <h3>\t\t                <%if(data.chinesename){%>\t\t                <b style="margin-right:10px;"><%=data.chinesename%></b>\t\t                <%}if(data.englishname){%>\t\t                <span><%=data.englishname%></span>\t\t                <%}%>\t\t            </h3>\t\t            <%if(data.photo.length>0){%>\t\t            <div class="clearfix">\t\t                <ul class="img-list">\t\t                    <%for(var i=0;i<data.photo.length;i++){%>\t\t                    <li>\t\t                        <img src="<%=data.photo[i]%>"/>\t\t                    </li>\t\t                    <%}%>\t\t                </ul>\t\t            </div>\t\t            <%}%>\t\t            <div style="margin-top:5px;">\t\t                <%if(data.price){%>\t\t                <dl class="clearfix">\t\t                    <dt>\t\t                        人均：\t\t                    </dt>\t\t                    <dd>\t\t                       <%=data.price%>\t\t                    </dd>\t\t                </dl>\t\t                <%}%>\t\t                <dl class="clearfix">\t\t                    <dt><%if(data.recommend_tag.length>0){%>特色菜：<%}%></dt>\t\t                    <dd>\t\t                    <%if(data.recommend_tag.length>0){%>\t\t                    <%for(var i=0;i<data.recommend_tag.length;i++){%>\t\t                        <span><%=data.recommend_tag[i].catename%></span>\t\t                    <%}%>\t\t                    <%}%>\t\t                    <p class="moreP"><span>查看详情</span></p>\t\t                    </dd>\t\t                 </dl>\t\t            </div>\t\t            </a>\t\t            <span data-poiId="<%=data.id%>" onclick="window._addToPlan(this,window.__callback)" class="js-favorite-btn favorite fe-place-iconfont icon-place-heart<%if((data.planto!=0)&&data.planto){%>-fill<%}%>"></span>\t\t        </div>\t\t    <%}%>',simpleCardTpl:'<div class="qmap-card qmap-simpleCard">\t\t            <%if(data.type=="hotel"){%>\t\t            <a href="<%=data.hotel_booking_url%>" onclick="window.__doCardTrackCode()" target="_blank">\t\t\t        \t<span class="arrow fe-place-iconfont">&#xe650;</span>\t\t\t        \t<h3><b><%=(data.chinesename||data.englishname)%></b></h3>\t\t\t            <div class="price">\t\t\t                <span class="fe-place-iconfont">&#xe67e;</span><em><%=data.price%></em>元起\t\t\t            </div>\t\t\t            <div class="link">\t\t\t\t            <span>\t\t\t\t                <i class="fe-place-iconfont">&#xe6a6;</i>\t\t\t\t            </span>\t\t\t\t        </div>\t\t\t        </a>\t\t            <%}else if(data.type=="fun"){%>\t\t            <a href="<%=data.url%>" onclick="window.__doCardTrackCode()" target="_blank">\t\t            <span class="arrow fe-place-iconfont">&#xe650;</span>\t\t        \t<h3><b><%=(data.chinesename||data.englishname)%></b></h3>\t\t                <%if(data.discount&&data.discount_price&&(!data.discount_price===false)){%>\t\t                <div class="price">\t\t                    <span class="fe-place-iconfont">&#xe65f;</span><%:=data.discount_price%>\t\t                </div>\t\t                <%}%>\t\t                <div class="link">\t\t\t\t            <span>\t\t\t\t                <i class="fe-place-iconfont">&#xe6a6;</i>\t\t\t\t            </span>\t\t\t\t        </div>\t\t\t\t    </a>\t\t            <%}else if(data.type=="food"){%>\t\t            <a href="<%=data.url%>" onclick="window.__doCardTrackCode()" target="_blank">\t\t\t            <span class="arrow fe-place-iconfont">&#xe650;</span>\t\t\t        \t<h3><b><%=(data.chinesename||data.englishname)%></b></h3>\t\t\t            <%if(data.discount&&data.discount_price&&(!data.discount_price===false)){%>\t\t\t                <div class="price">\t\t\t                    <span class="fe-place-iconfont">&#xe65f;</span><%:=data.discount_price%>\t\t\t                </div>\t\t\t            <%}%>\t\t\t            <div class="link">\t\t\t\t            <span>\t\t\t\t                <i class="fe-place-iconfont">&#xe6a6;</i>\t\t\t\t            </span>\t\t\t\t        </div>\t\t\t        </a>\t\t            <%}else{%>\t\t            \t<a href="<%=data.url%>" onclick="window.__doCardTrackCode()" target="_blank">\t\t\t            <span class="arrow fe-place-iconfont">&#xe650;</span>\t\t\t        \t<h3><%=(data.chinesename||data.englishname)%></h3>\t\t\t            <div class="link">\t\t\t\t            <span>\t\t\t\t                <i class="fe-place-iconfont">&#xe6a6;</i>\t\t\t\t            </span>\t\t\t\t        </div>\t\t\t        </a>\t\t            <%}%>\t\t    </div>',tagsTpl:'<li class="on" onclick="window.__doStarTrack()" data-id="0">全部</li>                <% for(var i = 0; i < data.length; i++) {%>                <li data-id="<%:=data[i].cateid%>" onclick="window.__doTagTrack(<%:=data[i].cateid%>)"><%:=data[i].catename%></li>                <%}%>',mainHTML:'<div class="qmap-main clearfix">\t\t\t    <div class="qmap-tar clearfix" id="place">\t\t\t        <div class="qmap-left"></div>\t\t\t        <div class="qmap-right" id="map"></div>\t\t\t    </div>\t\t\t</div>',listHTML:'<h4 class="qmap-topTitle">\t\t\t\t\t<span class="left js-back">\t\t\t\t\t\t<a href="javascript:void(0)" class="fe-place-iconfont">&#xe649;</a>\t\t\t\t\t</span>\t\t\t\t\t<span class="name"><%:=name||name_en%></span>周边\t        \t</h4>\t        \t<ul class="nav clearfix">\t        \t\t<li class="on" data-bn-ipg="place-'+window.__citymap()+'-cat-visit" data-id="fun">玩</li>\t            \t<li class="separation" data-bn-ipg="place-'+window.__citymap()+'-cat-hotel" data-id="hotel">住</li>\t            \t<li data-id="food" data-bn-ipg="place-'+window.__citymap()+'-cat-food">吃</li>\t        \t</ul>\t        \t<p class="msg"></p>\t            <ul class="tags"></ul>\t            <div class="criteria clearfix" id="criteria">\t                <div id="sort" class="qui-select" data-ui-width="83px" data-ui-height="22px" data-value="1">\t                    <strong class="titles"><span class="title-text">按热门</span></strong>\t                    <div class="contents" style="display:none;">\t                        <ul>\t                            <li data-value="1" data-bn-ipg="place-'+window.__citymap()+'-hotel-filter-default"><a href="javascript:void(0);">按热门</a></li>\t                            <li data-value="3" data-bn-ipg="place-'+window.__citymap()+'-hotel-filter-pricedesc"><a href="javascript:void(0);">价格从高到底</a></li>\t                            <li data-value="2" data-bn-ipg="place-'+window.__citymap()+'-hotel-filter-priceasc"><a href="javascript:void(0);">价格从低到高</a></li>\t                        </ul>\t                    </div>\t                </div>\t                <span>当前区域0家酒店</span>\t            </div>\t            <div id="searchboxContainer"></div>\t            <div class="qmap-listwrap" id="listWrap">\t            \t<ul class="qmap-poiList clearfix" id="mapPlaceList"></ul>\t            </div>'}}),define("common/widget/widget-tpl",["common/widget/widget","common/util/template","common/widget/tpls"],function(t,e,i){"use strict";return t.createClass({html:function(t){var i=this.template(),n=e.render(i,t);return n},template:function(){return i[this.$template.selector]||$("#"+this.$template).html()},render:function(t){this.$()[this.append?"append":"html"](this.html(t))}},{append:!0,$template:"tpl"})}),define("common/widget/widget-service",["common/widget/widget-tpl","common/util/template"],function(t,e){"use strict";return t.createClass({status:0,_xhr:null,_load:function(){return this.abort(),this._xhr=this.service.apply(this.service,arguments)},load:function(){var t=Array.prototype.slice.apply(arguments),e=t[t.length-2];t[t.length-2]=$.proxy(function(i){this.status=this.getStatic("STATUS").NORMAL,$.isFunction(e)&&e.call(this,i),this.checkData.apply(this,[i].concat(t))&&this.renderData(i)},this);var i=t[t.length-1];return t[t.length-1]=$.proxy(function(){this.status=this.getStatic("STATUS").NORMAL,$.isFunction(i)&&i.apply(this,arguments)},this),this.status=this.getStatic("STATUS").LOADING,this._load.apply(this,t)},abort:function(){this._xhr&&this._xhr.abort&&this._xhr.abort()},renderData:function(t){this.render(t)},checkData:function(t,e){return!0}},{ATTRS:{service:null},STATUS:{NORMAL:0,LOADING:1}})}),define("common/service/service",[],function(){return{post:function(t,e,i,n){return qyerUtil.doAjax({url:t,type:"POST",data:e,onSuccess:i,onError:n})},get:function(t,e,i,n){return qyerUtil.doAjax({url:t,type:"GET",data:e,onSuccess:i,onError:n})}}}),define("common/service/poimap/urls",[],function(){return{getPoiCate:"http://common1.qyerstatic.com/map.php?action=poicate",getPoiList:"http://common1.qyerstatic.com/map.php?action=maplist",getPoiDetail:"http://common1.qyerstatic.com/map.php?action=getDetail",getOtherCategoryPoi:"http://common1.qyerstatic.com/map.php?action=getOtherCategoryPoiInMap",setPoiCollection:"http://common1.qyerstatic.com/public.php?action=feeling",getSearchPoiList:"http://common1.qyerstatic.com/map.php?action=poisearch",getSearchCityList:"http://common1.qyerstatic.com/map.php?action=citysearch",getPoiDetail_old:"http://common1.qyerstatic.com/poi.php?action=poijson"}}),define("common/service/poimap/poi-service",["../service","./urls","../../util/template"],function(t,e,i){"use strict";var n={TYPE_NAME:{CITY:"city",COUNTRY:"country"},TYPE:{FUN:"fun",HOTEL:"hotel",FOOD:"food"},STAR:{LOW:1,MEDIUM:2,HIGH:3},ORDER:{HOT:1,PRICE_LOW_HIGH:2,PRICE_HIGH_LOW:3},getPoiCate:function(t,e,i){switch(t){case n.TYPE.HOTEL:return n.getHotelCate(e,i);case n.TYPE.FOOD:return n.getFoodCate(e,i);default:return n.getFunCate(e,i)}},getFunCate:function(i,n){return t.get(e.getPoiCate,{},i,n)},getHotelCate:function(t,e){return t({error_code:0,result:"ok",data:[{cateid:n.STAR.LOW,catename:"1-2星级"},{cateid:n.STAR.MEDIUM,catename:"3-4星级"},{cateid:n.STAR.HIGH,catename:"5星级"}]})},getFoodCate:function(t,e){return t({error_code:0,result:"ok",data:[]})},_poiListFilter:function(t,e){$.each(e||[],function(e,i){i.type=t.type,i.index=e,t.type===n.TYPE.HOTEL&&(i.id=i.id||i.hotel_id,i.lat=i.lat||i.hotel_lat,i.lng=i.lng||i.hotel_lng,i.chinesename=i.chinesename||i.hotel_chinesename,i.englishname=i.englishname||i.hotel_englishname,i.price=i.price||i.hotel_price,i.url=i.url||i.hotel_url)})},getPoiList:function(i,a,o){var r=function(t){n._poiListFilter(i,t&&t.data&&t.data.res),a(t)};return t.post(e.getPoiList,i,r,o)},getFirstPoiList:function(i,n,a){return t.post(e.getPoiList,i,n,a)},getPoiDetail:function(i,n,a){return t.get(e.getPoiDetail,i,n,a)},getPoiDetail_old:function(i,n,a){return t.get(e.getPoiDetail_old,i,n,a)},getOtherCategoryPoi:function(i,a,o){var r=function(t){if(t.data){var e=t.data.fun;n._poiListFilter({type:n.TYPE.FUN},e);var i=t.data.hotel&&t.data.hotel.res;n._poiListFilter({type:n.TYPE.HOTEL},i),i&&(t.data.hotel=i);var o=t.data.food;n._poiListFilter({type:n.TYPE.FOOD},o)}a(t)};return t.get(e.getOtherCategoryPoi,i,r,o)},setPoiCollection:function(i,n,a){return t.post(e.setPoiCollection,i,n,a)},getSearchPoiList:function(i,n,a){return t.post(e.getSearchPoiList,i,n,a)},getSearchCityList:function(i,n,a){return t.get(e.getSearchCityList,i,n,a)}};return n}),define("common/widget/poimap/widget-auto-height",["../widget-service"],function(t){"use strict";return t.createClass({init:function(t){this.callSuper.apply(this,arguments),this._id=(new Date).getTime(),this.$box=$(t.$box)||$(document.body),this.bindEvents()},bindEvents:function(){$(window).on("resize."+this._id,$.proxy(this.setHeight,this))},unbindEvents:function(){$(window).off("resize."+this._id)},setHeight:function(){this.$().height(this.getHeight())},getHeight:function(){return this.$box.height()-this.$().offset().top+this.$box.offset().top},destroy:function(){this.unbindEvents(),this.callSuper.apply(this,arguments)}},{ATTRS:{$box:$(document.body)}})}),define("common/basic/js/normalize",[],function(){function t(t,i,a){if(t.match(s)||t.match(r))return t;t=o(t);var c=a.match(r),l=i.match(r);return!l||c&&c[1]==l[1]&&c[2]==l[2]?n(e(t,i),a):e(t,i)}function e(t,e){
if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(s)||t.match(r))return t;var i=e.split("/"),n=t.split("/");for(i.pop();curPart=n.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function n(t,e){var n=e.split("/");for(n.pop(),e=n.join("/")+"/",i=0;e.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=e.substr(i,1);)i--;e=e.substr(i+1),t=t.substr(i+1),n=e.split("/");var a=t.split("/");for(out="";n.shift();)out+="../";for(;curPart=a.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var a=/([^:])\/+/g,o=function(t){return t.replace(a,"$1/")},r=/[^\:\/]*:\/\/([^\/])*/,s=/^(\/|data:)/,c=function(e,i,n){i=o(i),n=o(n);for(var a,r,e,s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\((?!#)\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;a=s.exec(e);){r=a[3]||a[2]||a[5]||a[6]||a[4];var c;c=t(r,i,n);var l=a[5]||a[6]?1:0;e=e.substr(0,s.lastIndex-r.length-l-1)+c+e.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(c.length-r.length)}return e};return c.convertURIBase=t,c.absoluteURI=e,c.relativeURI=n,c}),define("common/basic/js/require-css",[],function(){if("undefined"==typeof window)return{load:function(t,e,i){i()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,i=!1,n=!0;e[1]||e[7]?i=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]||e[8]?n=!1:e[4]&&(i=parseInt(e[4])<18);var a={};a.pluginBuilder="./css-builder";var o,r,s,c=function(){o=document.createElement("style"),t.appendChild(o),r=o.styleSheet||o.sheet},l=0,u=[],d=function(t){r.addImport(t),o.onload=function(){p()},l++,31==l&&(c(),l=0)},p=function(){s();var t=u.shift();return t?(s=t[1],void d(t[0])):void(s=null)},h=function(t,e){if(r&&r.addImport||c(),r&&r.addImport)s?u.push([t,e]):(d(t),s=e);else{o.textContent='@import "'+t+'";';var i=setInterval(function(){try{o.sheet.cssRules,clearInterval(i),e()}catch(t){}},10)}},f=function(e,i){var a=document.createElement("link");if(a.type="text/css",a.rel="stylesheet",n)a.onload=function(){a.onload=function(){},setTimeout(i,7)};else var o=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==a.href)return clearInterval(o),i()}},10);a.href=e,t.appendChild(a)};return a.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},a.load=function(t,e,n,a){(i?h:f)(e.toUrl(t+".css"),n)},a}),define("common/basic/js/require-css!common/ui/pages/pages",[],function(){}),define("common/ui/pages/pages",["css!common/ui/pages/pages.css"/*tpa=http://common1.qyerstatic.com/place/js/map/css!common/ui/pages/pages.css*/],function(){function t(t){this.init(t)}return t.prototype={container:null,pageCount:15,allCount:1,curNum:1,preCountNum:5,nextCountNum:5,preLabel:"上一页",nextLabel:"下一页",anchor:"",idxIpg:"",preIpg:"",nextIpg:"",pageIpg:"",curListLength:1,init:function(t){$.extend(this,t),this.dom=$(this.container),this.PN||this.setPageNum(),this.render(),this.bindEvent()},bindEvent:function(){var t=this;this.dom.undelegate("a","click").delegate("a","click",function(){var e=$(this).attr("data-idx");"pre"==e?t.pre():"next"==e?t.next():t.reset(e)})},pre:function(){this.curNum>1&&this.reset(this.curNum-1)},next:function(){this.curNum<this.pageNum&&this.reset(this.curNum+1)},reset:function(t){this.curNum=t-0,this.render(),$(this).trigger("firepage",this.curNum)},getPreHtml:function(){return 1==this.curNum?"":'<a href="'+this.getAnchor()+'" data-idx="pre" class="ui_page_item ui_page_prev" data-bn-ipg="'+this.preIpg+'">上一页</a>'},getPreContentHtml:function(){var t=[];if(this.curNum-this.preCountNum>1){t.push('<a href="'+this.getAnchor()+'" class="ui_page_item" data-idx="1" >1 ...</a>');for(var e=this.curNum-this.preCountNum+1;e<=this.curNum;e++)t.push('<a href="'+this.getAnchor()+'" class="ui_page_item '+(this.curNum==e?"ui_page_item_current":"")+'" data-idx="'+e+'" data-bn-ipg="'+this.pageIpg+'">'+e+"</a>")}else for(var e=1;e<=this.curNum;e++)t.push('<a href="'+this.getAnchor()+'" class="ui_page_item '+(this.curNum==e?"ui_page_item_current":"")+'" data-idx="'+e+'" data-bn-ipg="'+this.pageIpg+'">'+e+"</a>");return t},getNextCountHtml:function(){var t=[];if(this.curNum+this.nextCountNum>this.pageNum)for(var e=this.curNum+1;e<=this.pageNum;e++)t.push('<a href="'+this.getAnchor()+'" class="ui_page_item" data-idx="'+e+'" data-bn-ipg="'+this.pageIpg+'">'+e+"</a>");else{for(var e=this.curNum+1;e<=this.curNum+this.nextCountNum-1;e++)t.push('<a href="'+this.getAnchor()+'" class="ui_page_item" data-idx="'+e+'" data-bn-ipg="'+this.pageIpg+'">'+e+"</a>");this.curNum+this.nextCountNum==this.pageNum?t.push('<a href="'+this.getAnchor()+'" class="ui_page_item" data-idx="'+this.pageNum+'" data-bn-ipg="'+this.pageIpg+'">'+this.pageNum+"</a>"):t.push('<a href="'+this.getAnchor()+'" class="ui_page_item" data-idx="'+this.pageNum+'" data-bn-ipg="'+this.pageIpg+'">...'+this.pageNum+"</a>")}return t},getContentHtml:function(){var t=[];return t=t.concat(this.getPreContentHtml()),t=t.concat(this.getNextCountHtml()),t.join("")},getNextHtml:function(){return this.curNum==this.pageNum?"":'<a href="'+this.getAnchor()+'" data-idx="next" class="ui_page_item ui_page_next" data-bn-ipg="'+this.nextIpg+'">下一页</a>'},getAnchor:function(){return""!=this.anchor?"#"+this.anchor:"javascript:;"},getHtml:function(){var t='<div class="ui_page">';return t+=this.getPreHtml(),t+=this.getContentHtml(),t+=this.getNextHtml(),t+="</div>"},getOnlyPNHtml:function(){return'<div class="ui_page">'+this.getOnlyPNPrevHtml()+this.getOnlyPNNextHtml()+"</div>"},getOnlyPNPrevHtml:function(){return this.curNum<=1?"":'<a href="javascript:;" data-idx="'+(this.curNum-1)+'" class="ui_page_item ui_page_prev">上一页</a>'},getOnlyPNNextHtml:function(){return this.curListLength-this.pageCount>=0?'<a href="javascript:;" data-idx="'+(this.curNum-0+1)+'" class="ui_page_item ui_page_next">下一页</a>':""},setPageCount:function(t){this.pageCount=t-0,this.setPageNum()},setAllCount:function(t){this.allCount=t-0,this.setPageNum()},getCurNum:function(){return parseInt($(this.dom).find(".ui_page_item_current").attr("data-idx"),10)},setCurNum:function(t){this.curNum=t-0},setPageNum:function(){this.pageNum=Math.ceil(this.allCount/this.pageCount)},show:function(){this.dom.show()},hide:function(){this.dom.hide()},destroy:function(){this.dom.children().remove()},render:function(){if(this.PN)var t=this.getOnlyPNHtml();else var t=this.getHtml();this.dom.html(t)}},t}),define("common/basic/js/require-css!common/ui/select/select",[],function(){}),define("common/ui/select/select",["css!common/ui/select/select.css"/*tpa=http://common1.qyerstatic.com/place/js/map/css!common/ui/select/select.css*/],function(){function t(t){this.$obj=t.$obj,this.$title=this.$obj.find(".titles > .title-text"),this.$content=this.$obj.find(".contents"),this.option=t.option,this.selectIndex=0,this.setUI(),this.bindEvent(),this.setDefaultValue()}var e=jQuery;t.prototype={$obj:null,$title:null,$content:null,option:null,selectIndex:null,_disable:!1,setUI:function(){var t=this.$obj.find(".titles"),e=this.$obj.attr("data-ui-width");e=e?e:t.outerWidth(),e=parseInt(e,10),e<=0&&(e=100),e-=2,t.css("width",e),this.$obj.css("width",t.outerWidth());var i=this.$obj.attr("data-ui-height");i&&(this.$obj.css("height",i),this.$obj.find(".titles").css("line-height",i),this.$content.css("top",i)),e=this.$obj.attr("data-ui-menuWidth"),e=e?e:t.outerWidth(),e=parseInt(e,10),e-=2,this.$content.css("width",e),e=i=t=null},bindEvent:function(){var t=this,i=200;this.$obj.delegate(".titles","click",function(n){t._disable||(window.__currentSelect__&&window.__currentSelect__!=t&&window.__currentSelect__.$content.slideUp(i),window.__currentSelect__=t,n.stopPropagation(),t.$content.is(":hidden")?(t.$content.slideDown(i),e(document).one("click",function(){t.$content.slideUp(i)})):t.$content.slideUp(i))}),this.$obj.delegate(".contents > ul > li ","click",function(){t.$content.slideUp(i);var n=e(this);if(t.option&&t.option.onBeforeChange){var a=t.option.onBeforeChange.call(t.$obj[0],n[0]);if(a===!1)return}t.selectIndex=n.index();var o=n.attr("data-value");t.$obj.attr("data-value",o),t.$title.html(n.find("a").html()),t.option&&t.option.onChange&&t.option.onChange.call(t.$obj[0],n[0]),n=o=null})},setDefaultValue:function(){var t=e.trim(this.$obj.attr("data-dafaultValue"));if(t){var i=this.$content.find('ul > li[data-value="'+t+'"] ');i.length&&(this.selectIndex=i.index(),this.$title.html(i.text())),i=null}t=null},getSelectItem:function(){return this.$content.find("ul > li:eq("+this.selectIndex+") ")[0]},setSelectIndex:function(t){this.selectIndex=t;var e=this.$content.find("ul > li:eq("+t+") > a ").html();this.$title.html(e),e=null},getSelectIndex:function(){return this.selectIndex},setOption:function(t,e){this.option[t]=e},setValue:function(t){var e=this.$content.find('ul > li[data-value="'+t+'"]');this.selectIndex=e.index(),this.$title.html(e.children("a").html()),e=null},disable:function(){this._disable=!0,this.$obj.addClass("qui-select-disable")},enable:function(){this._disable=!1,this.$obj.removeClass("qui-select-disable")},setTitle:function(t){this.$title.html(t)}},e.fn.extend({qyerSelect:function(i){var n={getSelectItem:function(t){return t.data("_qyerSelect").getSelectItem()},getValue:function(t){return t.data("_qyerSelect").getSelectItem().getAttribute("data-value")},setValue:function(t,e){return t.data("_qyerSelect").setValue(e)},setSelectIndex:function(t,e){return t.data("_qyerSelect").setSelectIndex(e),t},setOption:function(t,e,i){return t.data("_qyerSelect").setOption(e,i),t},getSelectIndex:function(t){return t.data("_qyerSelect").getSelectIndex()},disable:function(t){return t.data("_qyerSelect").disable()},enable:function(t){return t.data("_qyerSelect").enable()},setTitle:function(t,e){return t.data("_qyerSelect").setTitle(e)}},a=e.type(i);if("object"==a||"undefined"==a){var o;return e.each(this,function(n,a){o=e(a),o.data("_qyerSelect")||o.data("_qyerSelect",new t({$obj:o,option:i?i:{}}))}),o=null,this}if("string"==a){var o,r=arguments,s=[];return e.each(this,function(t,a){if(o=e(a),n[i]){var c=qyerUtil.sliceArguments(r,1);c.unshift(o),s.push(n[i].apply(n,c)),c=null}}),o=r=null,s.length?1==s.length?s[0]:s:this}}})}),define("common/basic/js/require-css!common/ui/inputAutocomplete/inputAutocomplete",[],function(){}),define("common/ui/inputAutocomplete/inputAutocomplete",["css!common/ui/inputAutocomplete/inputAutocomplete.css"/*tpa=http://common1.qyerstatic.com/place/js/map/css!common/ui/inputAutocomplete/inputAutocomplete.css*/],function(){function t(t){this.$obj=t.$obj,this.timer=null,this.isSearching=!1,this.autoSelect=!1,this.$contentDiv=null,this.option=t.option,t.option.parent&&(this.$parent=e(t.option.parent)),this.init()}var e=jQuery;t.prototype={$obj:null,timer:null,option:null,isSearching:!1,autoSelect:!1,$contentDiv:null,$parent:null,init:function(){this.createDomNode(),this.bindEvent()},createDomNode:function(){var t=['<div class="qui-inputAutocomplete" style="display:none;">','<ul class="qui-inputAutocomplete-ul" >','<li class="disableDefalut">loading ... </li>',"</ul>","</div>"].join("");this.$contentDiv=e(t);var i={width:this.$obj.outerWidth()};if(!this.$parent){var n=this.$obj.offset();i.top=n.top+this.$obj.outerHeight(),i.left=n.left,n=null}this.$contentDiv.css(i),this.$contentDiv.appendTo(this.$parent||document.body),t=i=null},_blurTimer:null,bindEvent:function(){var t=this;this.$obj.keyup(function(i){if(e.inArray(i.keyCode,[37,39])==-1)return 9==i.keyCode?(t.$contentDiv.hide(),void(t.option.onVoid&&t.option.onVoid(t.$obj[0]))):void(e.inArray(i.keyCode,[38,40,13])!=-1?t.updateUI(i.keyCode):e.trim(t.$obj.val())||t.option.isAllowEmptySeach?t.registSearch():(t.$contentDiv.hide(),t.option.onVoid&&t.option.onVoid(t.$obj[0])))}).blur(function(){t._blurTimer=window.setTimeout(function(){t.$contentDiv.is(":hidden")||t.option.isBlurClose!==!1&&t.$contentDiv.hide()},300)}),this.option.isFocusedSeach&&this.$obj.focus(function(){(e.trim(t.$obj.val())||t.option.isAllowEmptySeach)&&t.registSearch()}),this.$contentDiv.delegate(".qui-inputAutocomplete-ul li","click",function(i){return i.target.className.indexOf("disableDefalut")!=-1?(i.stopPropagation(),void window.clearTimeout(t._blurTimer)):void(this.className.indexOf("disableDefalut")==-1&&(t.$obj.val(e(this).text()),t.$contentDiv.hide(),t.option.onSelect&&(t.option.onSelect.call(t.$obj[0],this),t.$contentDiv.html(""))))})},registSearch:function(){var t=this;this.isSearching=!1,window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){(e.trim(t.$obj.val())||t.option.isAllowEmptySeach)&&(t.isSearching=!0,t.showContentDiv(),t.option.onSearch.call(t.$obj[0]))},300)},showContentDiv:function(){var t=this;this.$contentDiv.is(":hidden")&&(this.$contentDiv.show(),e(document).one("click",function(e){t.option.isBlurClose!==!1&&t.$contentDiv.hide()}))},updateUI:function(t){function i(){var t=a.find("li[data-select=true]"),e=a.find("li").index(t);t.attr("data-select",""),t.length?(t=a.find("li:not(.disableDefalut)").eq(e+1),t.length||(t=a.find("li:eq(0)"))):t=a.find("li:eq(0)"),t.attr("data-select","true"),t=null}function n(){var t=a.find("li[data-select=true]"),e=a.find("li").index(t);t.attr("data-select",""),t.length?(t=a.find("li:not(.disableDefalut)").eq(e-1),t.length||(t=a.find("li:eq("+(o-1)+")"))):t=a.find("li:eq("+(o-1)+")"),t.attr("data-select","true"),t=null}if(!this.$contentDiv.is(":hidden")){var a=this.$contentDiv.find(".qui-inputAutocomplete-ul"),o=a.find("li:not(.disableDefalut)").size();if(o&&(e.inArray(t,[38,40])!=-1&&(40==t?i():n()),this.option.enterSelect!==!1&&13==t)){var r=a.find("li[data-select=true]");r.length?(this.$obj.val(r.text()),this.option.onSelect&&(this.option.onSelect.call(this.$obj[0],r[0],!0),this.$contentDiv.html("")),this.$contentDiv.hide()):this.option.isBlurClose!==!1&&this.$contentDiv.hide()}}},pushHTML:function(t){var e={width:this.$obj.outerWidth()};if(!this.$parent){var i=this.$obj.offset();e.top=i.top+this.$obj.outerHeight(),e.left=i.left,i=null}this.$contentDiv.css(e).html(t).show(),this.isSearching=!1,e=null;var n=this.$contentDiv.find(".qui-inputAutocomplete-ul > li:not(.disableDefalut)");n.length&&this.autoSelect!==!1&&n.eq(0).attr("data-select","true"),n=null},isShow:function(){return!this.$contentDiv.is(":hidden")},hide:function(){return this.$contentDiv.hide()},destroy:function(){this.$contentDiv.remove()}},e.fn.extend({qyerAutocomplete:function(i){var n,a,o=arguments;return e.each(this,function(r,s){n=e(s),"object"==e.type(i)?n.data("_autocomplete",new t({$obj:n,option:i})):"pushHTML"==i?n.data("_autocomplete").pushHTML(o[1]):"getContent"==i?a=n.data("_autocomplete").$contentDiv:"isShow"==i?a=n.data("_autocomplete").isShow():"hide"==i?n.data("_autocomplete").hide():"destroy"==i&&(n.data("_autocomplete").destroy(),n.data("_autocomplete",null))}),n=o=null,"undefined"==typeof a?this:a}})}),define("common/widget/poimap/widget-list-container",["../widget-service","../../service/poimap/poi-service","./widget-auto-height","common/ui/pages/pages","common/ui/select/select","common/ui/inputAutocomplete/inputAutocomplete"],function(t,e,i,n){"use strict";var a=t.createClass({load:function(t,e,i){return this.$().removeClass(this.constructor.CLASSNAME.NODATA),this.$().addClass(this.constructor.CLASSNAME.LOADING),this.callSuper(t,this.proxy(function(){this.$().removeClass(this.constructor.CLASSNAME.LOADING),e&&e.apply(this,arguments)}),this.proxy(function(){this.$().removeClass(this.constructor.CLASSNAME.LOADING),i&&i.apply(this,arguments)}))},getItemSelector:function(){return this.constructor.SELECTOR.ITEM},$item:function(t){return t?this.$('[data-id="'+t+'"]',this.getItemSelector()):this.$(this.getItemSelector())},$currentItem:function(){return this.$("."+this.constructor.CLASSNAME.ON,this.getItemSelector())},getCurrentId:function(){return this.$currentItem().attr("data-id")||0},change:function(t){this.highlight(t),this.trigger(this.constructor.EVENTS.CHANGE,t)},highlight:function(t){var e=this.constructor.CLASSNAME.ON;this.$item().removeClass(e),t.addClass(e)}},{SELECTOR:{ITEM:">li"},CLASSNAME:{ON:"on",NODATA:"nodata",LOADING:"loading"},EVENTS:{CHANGE:"change-event",CLICK:"click-event"}}),o=t.createClass({init:function(){this.callSuper.apply(this,arguments),this.bindEvent()},load:function(t,e,i){this.abort(),this.service(t,$.proxy(e,this),$.proxy(i,this))},bindEvent:function(){var t=this,e=t.$(t.constructor.SELECTOR.INPUT);e.qyerAutocomplete({onSearch:function(i){var n=$.trim(e.val());""!=n&&t.load({keyword:n,page:1,typename:PLACE.TYPE,id:PLACE.PID},t.successFn,t.errorFn)},onSelect:function(e){t.trigger(t.constructor.EVENTS.select,e)}}),t.$(t.constructor.SELECTOR.BTN).off("click").on("click",function(e){t.trigger(t.constructor.EVENTS.buttonClick,e)}),t.$(t.constructor.SELECTOR.CLEAR).off("click").on("click",function(){e.val(""),t.trigger(t.constructor.EVENTS.clearClick)}),t.$(t.constructor.SELECTOR.INPUT).on("focus",function(){var e=$(this);e.on("keydown",function(e){13==e.keyCode&&t.trigger(t.constructor.EVENTS.keydown,e)}),t.$(t.constructor.SELECTOR.SEARCHINPUT).addClass("focus"),t.$(t.constructor.SELECTOR.CLEAR).show()}).on("blur",function(){$(this).off("keydown"),t.$(t.constructor.SELECTOR.SEARCHINPUT).removeClass("focus"),t.$(t.constructor.SELECTOR.CLEAR).hide()})},successFn:function(t){var e=this,i=e.$(e.constructor.SELECTOR.INPUT);i.val()==t.data.keyword&&i.qyerAutocomplete("pushHTML",t.data.html)},errorFn:function(t){},getType:function(){return this.$(this.constructor.SELECTOR.SELECT).attr("data-value")}},{EVENTS:{select:"select-event",cateChange:"cateChange-event",buttonClick:"buttonClick-event",showSearch:"showSearch-event",keydown:"keydown-event",clearClick:"clear-event"},ATTRS:{service:e.getSearchPoiList},SELECTOR:{INPUT:".search-input-text",SEARCHINPUT:".search-input",BTN:".search-button",CLEAR:".close"}}),r=a.createClass({events:[["click","_evt_click","li"]],_evt_click:function(t){this.change($(t.currentTarget))},checkData:function(t){return this.$()[t&&t.data&&t.data.length?"removeClass":"addClass"](this.constructor.CLASSNAME.NODATA),this.callSuper.apply(this,arguments)}},{ATTRS:{$template:"tagsTpl"}}),s=r.createClass({change:function(t){this.callSuper.apply(this,arguments),this.setSeparation(t)},$separation:function(t){return this.$item().not(":last").not(t).not(t.prev())},setSeparation:function(t){var e=this.constructor.CLASSNAME.SEPARATION;this.$item().removeClass(e),this.$separation(t).addClass(e)}},{CLASSNAME:{SEPARATION:"separation"}}),c=a.createClass({init:function(t){this.callSuper.apply(this,arguments),(t.lng||t.lat)&&(this.lng=t.lng,this.lat=t.lat)},events:[["mouseenter","_evt_mouseenter",">li"],["click","_evt_click",">li"]],_evt_mouseenter:function(t){this.change($(t.currentTarget))},_evt_click:function(t){this.trigger(this.constructor.EVENTS.CLICK,t.currentTarget)},highlight:function(t){var e=this.constructor.CLASSNAME.ON;this.$currentItem().find(".pin").removeClass(e),this.callSuper.apply(this,arguments),this.$currentItem().find(".pin").addClass(e),this.scrollIntoView(t)},scrollIntoView:function(t){var e=t.offset().top-this.$().offset().top,i=this.$().parent().scrollTop(),n=this.$().parent().height();e<i?this.$().parent().stop().animate({scrollTop:e}):e+t.height()>i+n&&this.$().parent().stop().animate({scrollTop:e+t.height()-n+30})},load:function(t){var i=t.type,n=t.cateid,a=t.keyword||"",o=Array.prototype.slice.apply(arguments),r=$.extend({type:i,id:PLACE.CITYID||PLACE.PID,typename:"city"!=PLACE.TYPE&&"country"http://common1.qyerstatic.com/place/js/map/!=PLACE.TYPE?"city":PLACE.TYPE,cateid:i===e.TYPE.HOTEL?"":i===e.TYPE.FOOD?78:n,page:t.page,bottom_coordinate:"",top_coordinate:"",keyword:a,lat:this.lat||"",lng:this.lng||"",qyer_star:i===e.TYPE.HOTEL?"number"==typeof n?n:this.params.qyer_star:"",order_type:i===e.TYPE.HOTEL?t.order_type:""},this.getCoordinate());this.isSendCoord&&(r.bottom_coordinate&&delete r.bottom_coordinate,r.top_coordinate&&delete r.top_coordinate),this.reqData&&(r=$.extend(r,this.reqData)),o[0]=this.params=r,this.$().empty(),this.callSuper.apply(this,o)},checkData:function(t){var e=t&&t.data&&t.data.res&&t.data.res.length;return this.$()[e?"removeClass":"addClass"](this.constructor.CLASSNAME.NODATA),this.callSuper.apply(this,arguments)},refresh:function(t,e,i){this.load($.extend(this.params||{},t),e||function(){},i||function(){})},getCoordinate:function(){return{bottom_coordinate:"",top_coordinate:""}}},{ATTRS:{$template:"poiListTpl",service:e.getPoiList}}),l=c.createClass({load:function(){this.page&&this.page.hide(),this.callSuper.apply(this,arguments)},render:function(t){t.data&&t.data.res&&t.data.res.length&&(this.callSuper.apply(this,arguments),this.initPage({data:t,total:t&&t.data&&t.data.count||0}))},clearList:function(){this.$el.empty(),this.destroyPage()},initPage:function(t){if(this.destroyPage(),"undefined"==typeof t.data.data.pager){var e={container:"#listPage",pageCount:this.pageCount,PN:!0};if(!t.data.data||!t.data.data.res)return;if(!this.params.page&&t.data.data.res.length<this.pageCount)return;if(1==this.params.page&&t.data.data.res.length<this.pageCount)return;return!this.params.page&&t.data.data.res.length>=this.pageCount?($('<div id="listPage"></div>').appendTo("#listWrap"),$.extend(e,{curListLength:t.data.data.res.length,curNum:1})):($('<div id="listPage"></div>').appendTo("#listWrap"),$.extend(e,{curListLength:t.data.data.res.length,curNum:this.params.page})),this.page=new n(e),this.page.render(),void $(this.page).unbind("firepage").bind("firepage",this.proxy(function(t,e){this.refresh({page:e})}))}t.total<=this.pageCount||($('<div id="listPage"></div>').appendTo("#listWrap"),this.page=new n({container:"#listPage",allCount:t.total,curNum:this.params.page||1,preCountNum:2,nextCountNum:2,pageCount:this.pageCount,preLabel:"上一页",nextLabel:"下一页"}),this.page.render(),$(this.page).unbind("firepage").bind("firepage",this.proxy(function(t,e){this.refresh({page:e})})))},destroyPage:function(){this.page&&this.page.destroy(),this.page=null,$("#listPage").remove()}},{ATTRS:{pageCount:15}});return t.createClass({init:function(t,e){this.callSuper.apply(this,arguments),t.$container&&(this.$container=t.$container),(t.lat||t.lng)&&(this.lat=t.lat,this.lng=t.lng),this.initList(),e&&(this.list.reqData=e),this.initTabs(),this.initTags(),this.initSort();var i="fun",n=0;t.category_name&&(i=t.category_name,"fun"!=i&&this.tabs.highlight(this.tabs.$item(i)),n=t.category_id);var a=this;$(a.tags).one("renderAfter-event",function(){0!=n&&a.tags.highlight(a.tags.$item(n))}),this.refresh(i,n),this.initSearch()},initTabs:function(){this.tabs=new s({$el:this.$(">.nav")}).on(s.EVENTS.CHANGE,this.proxy(function(t,e){this.list.isSendCoord=!1,this.refresh(null,0),window.__curTag=this.tabs.getCurrentId()})),window.__curTag=this.tabs.getCurrentId()},initTags:function(){var t=this;this.tags=new r({$el:this.$(">.tags"),service:e.getPoiCate}).after("render",this.proxy(function(e){this.autoHeight.setHeight(),t.cateid.fun=$.map(e.data,function(t){return t.cateid}).join(","),$(t.tags).trigger("renderAfter-event")})).on(r.EVENTS.CHANGE,this.proxy(function(t,e){this.list.refresh({page:1,cateid:e?$(e).attr("data-id")-0:this.tags.getCurrentId()})}))},initList:function(){this.autoHeight=new i({$el:"#listWrap",$box:this.$container||document.body}),this.list=new l({$el:"#mapPlaceList",lat:this.lat,lng:this.lng}).before("render",this.proxy(function(t){this.setMsg(t),this.trigger(this.constructor.EVENTS.REFRESH,t)})).after("render",this.proxy(function(){this.autoHeight.setHeight()}))},initSort:function(){$("#sort").qyerSelect({onChange:this.proxy(function(t){this.list.refresh({page:1,order_type:$(t).data("value")})})}),this.tabs.on(s.EVENTS.CHANGE,this.proxy(function(){this.resetSort()}))},initSearch:function(){var t=this;this.search=new o({$el:"#js-search-box"}),this.search.on(this.search.constructor.EVENTS.select+" "+this.search.constructor.EVENTS.buttonClick+" "+this.search.constructor.EVENTS.keydown,$.proxy(function(e){t.trigger(t.constructor.EVENTS.DOSEARCHLIST,e.currentTarget||e)},this)).on(this.search.constructor.EVENTS.clearClick,function(e){t.list.isSendCoord=!0,t.trigger(t.constructor.EVENTS.SEARCHCLEAR)})},displaySearch:function(){this.$().removeClass().addClass("qmap-left type-search"),this.list.clearList()},resetSort:function(){$("#sort").qyerSelect("setValue","1")},setMsg:function(t){this.$msg.html(t?this.getMsg(t):"")},getMsg:function(t){var e=t&&t.data&&t.data.count||0;switch(this.tabs.getCurrentId()){case"fun":return 1500==e?"当前区域不可错过去处超过1500个":"当前区域不可错过的"+e+"个去处";case"hotel":return"当前区域"+e+"家酒店";case"food":return 1500==e?"当前区域不可错过的美食超过1500个":"当前区域美食"+e+"个"}},refresh:function(t,e){t=t||this.tabs.getCurrentId(),e="number"==typeof e?e:this.tags.getCurrentId(),this.$().removeClass().addClass("qmap-left loading type-"+t),this.tags.load(t,this.proxy(function(i){this.$().removeClass("loading"),this.list.refresh({page:1,type:t,cateid:e})}),this.proxy(function(t){this.$().removeClass("loading")}))},cateid:{food:78}},{ATTRS:{tabs:null,tags:null,autoHeight:null,list:null,$msg:".msg,.criteria>span"},EVENTS:{REFRESH:"refresh-event",SEARCHCLEAR:"clear-event",DOSEARCHLIST:"dosearch-event"}})}),define("common/ui/gmap/gmap3",[],function(){var t={map:{},init:function(t,e){var i=this;window.google&&google.maps?i.initMap(t,e):(window.googleMapCbFun=function(){i.initMap(t,e)},$.getScript("http://place.qyer.com/google.php/?libraries=geometry&sensor=false&key=abc&callback=googleMapCbFun"))},initMap:function(t,e){var i=e.lat||39.92,n=e.lng||116.46,a={maxZoom:19,zoom:3,mapTypeControl:!0,center:o,scaleControl:!0,panControl:!1,streetViewControl:!1},o=new google.maps.LatLng(i,n);$.extend(a,e||{}),this.map=new google.maps.Map(document.getElementById(t),$.extend(a,{center:o})),this.map.markers=this.map.markers||[],this.map.lines=this.map.lines||[],this.map.polygon=this.map.polygon||[],this.getInfoBox()},getInfoBox:function(){var t=this;this.infoBox||requirejs(["common/ui/gmap/infobox"],function(e){t.infoBox=e,$(t).trigger("mapalready"),t.mapstatus="yes"})},getStatus:function(){var t=this;return!!t.mapstatus},setMap:function(t){this.map=t,this.map.markers=this.map.markers||[],this.map.lines=this.map.lines||[],this.map.polygon=this.map.polygon||[],this.getInfoBox()},getMap:function(){return this.map},createLatLng:function(t){return new google.maps.LatLng(t.lat-0,t.lng-0)},addMarker:function(t){var e,i=this.createLatLng(t),n=$.extend({},t,{position:i,map:this.map},{icon:t.icon&&this.getIcon(t.icon)});return e=new google.maps.Marker(n),this.map.markers.push(e),e},createInfoWindow:function(t){return new google.maps.InfoWindow(t)},createDiyInfoWindow:function(t){var e={alignBottom:!0,pixelOffset:new google.maps.Size((-110),(-30)),closeBoxURL:"",isHidden:!1};return $.extend(e,t),new this.infoBox(e)},addEvent:function(t,e,i){google.maps.event.addListener(t,e,function(){i&&i.call(t)})},removeEvent:function(t,e){google.maps.event.clearListeners(t,e)},getIcon:function(t){var e=new google.maps.Size(t.size.w,t.size.h),i=new google.maps.Point(t.point.x,t.point.y);return $.extend({},t,{size:e,origin:i})},searchMarkerByPosition:function(t,e){if(this.map.markers.length>0)for(var i,n,a=this.createLatLng(t),o=0;o<this.map.markers.length;o++)if(i=this.map.markers[o],n=i.position,a.toString()==n.toString())return e&&"del"==e&&this.map.markers.splice(o,1),i},changeMarkerIcon:function(t,e){var i=this.searchMarkerByPosition(t);i&&i.setIcon(this.getIcon(e.icon))},showInfoWindow:function(t){var e=this.searchMarkerByPosition(t);e.infoWindow.open(this.map,e)},closeInfoWindow:function(t){var e=this.searchMarkerByPosition(t);e.infoWindow.close()},delMarker:function(t){var e=this.searchMarkerByPosition(t,"del");e.setMap(null)},drawLine:function(t,e){for(var i,n,a=[],o=0;n=t[o++];)a.push(new google.maps.LatLng(n.lat,n.lng));return $.extend(e,{path:a}),i=new google.maps.Polyline(e),i.setMap(this.map),this.map.lines.push(i),i},drawPolygon:function(t,e){for(var i,n,a=[],o=0;o<t.length;o++)i=t[o].split(","),a.push(this.createLatLng({lat:i[0],lng:i[1]}));return n=new google.maps.Polygon($.extend(e,{paths:a})),n.setMap(this.map),this.map.polygon.push(n),n},fitBounds:function(t){for(var e=new google.maps.LatLngBounds,i=0;i<t.length;i++)e.extend(this.createLatLng(t[i]));this.map.fitBounds(e)},setCenter:function(t){for(var e=lng=0,i=0,n=t.length;i<n;i++){var a=t[i];e+=a.lat-0,lng+=a.lng-0}e/=n,lng/=n,this.map.setCenter(new google.maps.LatLng(e,lng))},setZoom:function(t){"number"==typeof t&&this.map.setZoom(t)},getPolyCenter:function(t){function e(t){return t.sort(function(t,e){return t-e})}for(var i,n,a,o,r,s,c=[],l=[],u=lats1=0,d=t.getPath(),p=d.length,h={},f=0;f<d.length;f++)s=d.getAt(f).lat(),r=d.getAt(f).lng(),l.push(r),c.push(s),u+=r,lats1+=s;return c=e(c),l=e(l),i=c.shift(),n=c.pop(),a=l.shift(),o=l.pop(),h.lat=i+(n-i)/2,h.lng=a+(o-a)/2,i=n=a=o=c=l=u=lats1=d=p=r=s=null,this.createLatLng(h)},clearLine:function(){if(this.map&&this.map.lines&&this.map.lines.length){for(var t,e=this.map.lines,i=0;t=e[i++];)t.setMap(null);e=[]}},clearMarker:function(){if(this.map&&this.map.markers&&this.map.markers.length){for(var t,e=0;t=this.map.markers[e++];)t.setMap(null);this.map.markers=[]}},empty:function(){this.clearLine(),this.clearMarker()}};return t}),define("common/widget/poimap/widget-map-container",["../widget-service","../../service/poimap/poi-service","common/ui/gmap/gmap3","./widget-auto-height"],function(t,e,i,n){"use strict";var a=t.createClass({events:[["mousemove",function(t){t.stopPropagation()}]],init:function(){var t=Array.prototype.slice.apply(arguments);t[0]=t[0]||{},t[0].$el=$("<div></div>"),this.callSuper.apply(this,t)},initInfoWindow:function(){!this.infoWindow&&(this.infoWindow=i.createDiyInfoWindow({content:this.$()[0],pixelOffset:new google.maps.Size(-this.getSize().width/2+this.pixelOffset.x||0,this.pixelOffset.y||0)}))},getSize:function(){var t=this.$();if(0===t.parent().length){t.addClass(this.constructor.CLASSNAME.FRAGMENT).appendTo(document.body);var e=this._getSize();return t.removeClass(this.constructor.CLASSNAME.FRAGMENT).appendTo(document.createDocumentFragment()),e}return this._getSize()},_getSize:function(){return{width:this.$().width(),height:this.$().height()}},render:function(){this.callSuper({data:this.poi}),this.open()},open:function(){this.initInfoWindow(),this.infoWindow.open(i.map,this.marker)},close:function(){this.abort(),this.infoWindow&&this.infoWindow.close()}},{ATTRS:{$template:"simpleCardTpl",poi:null,marker:null,pixelOffset:{x:0,y:-60}},CLASSNAME:{FRAGMENT:"fragment"}}),o=a.createClass({load:function(t,e){return this.callSuper({id:this.poi.id,type:this.poi.type},this.proxy(function(e){$.extend(this.poi,e&&e.data),t&&t(e)}),e)}},{ATTRS:{$template:"cardTpl",service:e.getPoiDetail}}),r=a.createClass();return t.createClass({mapUtils:i,init:function(t){this.callSuper.apply(this,arguments),t.$container&&(this.$container=t.$container),this.autoHeight=new n({$el:this.$(),$box:this.$container||document.body}),this.autoHeight.setHeight(),this.initMap()},mapAlready:!1,initMap:function(){i.init("map",{streetViewControl:!0,lat:this.lat,lng:this.lng,zoom:this.zoom||11,clickableIcons:!1,disableDefaultUI:!1})},ready:function(t){var e=this;return this.mapAlready?void(t&&t()):void $(i).one("mapalready",function(){e.mapAlready=!0,t&&t()})},empty:function(){window.mapUtils=i,this.closeCard(),i.empty(),this.emptyCircle()},addEvent:function(t,e,n){$.isArray(t)?$.each(t,this.proxy(function(t,i){this.addEvent(i,e,n)})):i.addEvent(t,e,n)},getIconOption:function(t,e){return{url:"http://common2.qyerstatic.com/place/project/images/map/map-marker-2016"+(window.devicePixelRatio>1?"@2x.png"/*tpa=http://common1.qyerstatic.com/place/js/map/@2x.png*/:".png"),size:{w:28,h:39},point:{x:68,y:45*e},scaledSize:{width:300,height:1200}}},getBigIconOption:function(t,e){return $.extend(this.getIconOption.apply(this,arguments),{size:{w:36,h:51},point:{x:108,y:55*e-1}})},createMarkerOption:function(t,e,i,n){return{lat:t.lat,lng:t.lng,icon:i.call(this,t,e),poi:t,zIndex:n||1e3}},createMarkersOption:function(t,e,i){var n=[];return $.each(t,this.proxy(function(t,a){n.push(this.createMarkerOption(a,t,e,i?i-t:""))})),n},addMarkersByData:function(t,e){var n=this.createMarkersOption(t,this.getIconOption,1e4),a=this.addMarkers(n);return e&&i.fitBounds(a),
a},addMarker:function(t){return i.addMarker(t)},addMarkers:function(t){return $.map(t,this.proxy(function(t){return this.addMarker(t)}))},getMarkerByPoi:function(t){for(var e,n=i.map.markers||[],a=0;e=n[a];a++)if(e.poi.id==t.id)return e},getPoiByMarker:function(t){return t.poi},bindMarkersEvent:function(t){t&&$.each(t,this.proxy(function(t,e){this.bindMarkerEvent(e)}))},bindMarkerEvent:function(t){var e=this;this.addEvent(t,"click",function(){e.currentCard&&e.currentCard.constructor!==a?(e.closeCard(),e.showIcon(this)):e.showCard(this),$(e).trigger(e.constructor.EVENTS.MARKERCLICK,t)}),this.addEvent(t,"mouseover",function(){e.currentCard&&e.currentCard.poi.id===e.getPoiByMarker(t).id||(e.showBigIcon(this),e.showSimpleCard(this))}),this.addEvent(t,"mouseout",function(){e.currentCard&&e.currentCard.constructor!==a||(e.showIcon(this),e.closeCard(250),e.emptyCircle())})},changeIcon:function(t,e){i.changeMarkerIcon({lat:t.position.lat(),lng:t.position.lng()},{icon:e})},showIcon:function(t){t&&"undefined"!=typeof t.setZIndex&&t.setZIndex(1e4);var e=this.getPoiByMarker(t);"undefined"!=typeof e&&this.changeIcon(t,this.getIconOption(e,e.index))},showBigIcon:function(t){t&&"undefined"!=typeof t.setZIndex&&t.setZIndex(20001);var e=this.getPoiByMarker(t);this.changeIcon(t,this.getBigIconOption(e,e.index)),this.currentCard&&this.currentCard.constructor!==r&&this.showIcon(this.currentCard.marker)},currentCard:null,closeCardTimer:null,clearCardTimer:function(){this.closeCardTimer&&clearTimeout(this.closeCardTimer),this.closeCardTimer=null},closeCard:function(t){this.clearCardTimer(),t?this.closeCardTimer=setTimeout(this.proxy(this._closeCard),t):this._closeCard()},_closeCard:function(){this.currentCard&&this.currentCard.close(),this.currentCard=null},showCard:function(t){this.closeCard();var e=this.currentCard=new o({poi:this.getPoiByMarker(t),marker:t});e.load(this.proxy(function(){}))},showSimpleCard:function(t){this.closeCard();var e=this.currentCard=new a({poi:this.getPoiByMarker(t),marker:t});e.render(),e.delegateEvent("mouseenter",this.proxy(this.clearCardTimer)),e.delegateEvent("mouseleave",this.proxy(function(){this.closeCard()}))},_circles:null,addCircle:function(t){var e=i.map.getCenter(),n=new google.maps.Circle($.extend({strokeColor:"#10b041",strokeOpacity:1,strokeWeight:.5,fillColor:"#FFFFFF",fillOpacity:0,map:i.map,center:e,radius:5e3},t));this._circles=this._circles||[],this._circles.push(n)},emptyCircle:function(){this._circles&&$.each(this._circles,function(t,e){e.setMap(null)}),this._circles=null}},{ATTRS:{lat:null,lng:null},EVENTS:{MARKERCLICK:"event-markerclick",OTHERMARKERCLICK:"event-othermarkerclick"}}).implement({showOtherCategoryPoi:function(t){e.getOtherCategoryPoi(t,this.proxy(function(t){if(t&&t.data){var e=t.data.fun&&this.addOtherMarkersByData(t.data.fun),i=t.data.hotel&&this.addOtherMarkersByData(t.data.hotel),n=t.data.food&&this.addOtherMarkersByData(t.data.food);this.bindOtherMarkersEvent(e),this.bindOtherMarkersEvent(i),this.bindOtherMarkersEvent(n);var a=t.data.transportation&&this.addTransportationMarkersByData(t.data.transportation);this.bindOtherMarkersEvent(a)}}),function(){})},bindOtherMarkersEvent:function(t){t&&$.each(t,this.proxy(function(t,e){this.bindOtherMarkerEvent(e)}))},bindOtherMarkerEvent:function(t){var e=this;this.addEvent(t,"mouseover",function(){e.currentCard&&e.currentCard.poi.id===e.getPoiByMarker(this).id||(e.showOtherCard(this),e.emptyCircle())}),this.addEvent(t,"mouseout",function(){e.currentCard&&e.currentCard.constructor!==r||e.closeCard(250)}),this.addEvent(t,"click",function(){e.trigger(e.constructor.EVENTS.OTHERMARKERCLICK,t)})},getOtherIconOption:function(t,i){var n=498;switch(t.type){case e.TYPE.FUN:n=558;break;case e.TYPE.HOTEL:n=498;break;case e.TYPE.FOOD:n=528}return $.extend(this.getIconOption.apply(this,arguments),{size:{w:17,h:17},point:{x:206,y:n}})},addOtherMarkersByData:function(t){var e=this.createMarkersOption(t,this.getOtherIconOption,8999),i=this.addMarkers(e);return i},showOtherCard:function(t){var e=this.currentCard;e&&!(e.constructor===r)&&this.showIcon(e.marker),this.closeCard();var i=this.getPoiByMarker(t),n=this.currentCard=new r({poi:i,marker:t,pixelOffset:{x:0,y:i.transporation_tag_type?-45:-28}});n.render(),n.delegateEvent("mouseenter",this.proxy(this.clearCardTimer)),n.delegateEvent("mouseleave",this.proxy(function(){this.closeCard()}))},getTransportationIconOption:function(t,e){var i=0;switch(t.transporation_tag_type){case"airport":i=0;break;case"bus":i=45;break;case"wharf":i=90;break;case"railway":i=180}return $.extend(this.getIconOption.apply(this,arguments),{size:{w:27,h:35},point:{x:158,y:i}})},addTransportationMarkersByData:function(t){var e=this.createMarkersOption(t,this.getTransportationIconOption),i=this.addMarkers(e);return i}})}),define("common/basic/js/require-css!common/ui/tip/tip",[],function(){}),define("common/ui/tip/tip",["css!common/ui/tip/tip.css"/*tpa=http://common1.qyerstatic.com/place/js/map/css!common/ui/tip/tip.css*/],function(){function t(t){n.html(t.text||"&nbsp;"),i[0].className="qui-tip-box","error"http://common1.qyerstatic.com/place/js/map/==t.type?i.addClass("qui-tip-box-error"):"warning"==t.type&&i.addClass("qui-tip-box-warning")}var e,i,n,a=jQuery;!function(){var t=['<div class="qui-tip" style="display:none;" >','<div class="qui-tip-box">','<span class="qui-tip-text fontYaHei">这里是提示文本</span>',"</div>","</div>"].join("");e=a(t),n=e.find(".qui-tip-text"),i=e.find(".qui-tip-box"),e.appendTo(document.body)}();var o={_timer:null,tip:function(i){return t(i),e.slideDown(200),window.clearTimeout(this._timer),this._timer=setTimeout(function(){e.slideUp(200)},i.time||3e3),this}};return o}),define("common/basic/js/require-css!common/ui/confirm/confirm",[],function(){}),define("common/ui/confirm/confirm",["css!common/ui/confirm/confirm.css"/*tpa=http://common1.qyerstatic.com/place/js/map/css!common/ui/confirm/confirm.css*/],function(){var t=jQuery,e={$ui:null,$box:null,$icon:null,$title:null,$text:null,init:function(){var i=['<div class="qui-confirm">',"<div>",'<div class="qui-confirm-box">','<div class="qui-confirm-box-title">',"title","</div>",'<div class="qui-confirm-box-content">','<div class="qui-confirm-box-content-icon"></div>','<div class="qui-confirm-box-content-text">',"提示文字","</div>",'<div class="qui-confirm-box-clearFloat">&nbsp;</div>',"</div>",'<div class="qui-confirm-box-bottom">','<input class="qui-confirm-okBtn ui_btn_small" type="button" value="确定" />  ','<input class="qui-confirm-cancelBtn ui_btn_small_cancel" type="button" value="取消" />  ',"</div>",'<div class="qui-confirm-closeIcon">&nbsp;</div>',"</div>","</div>","</div>"].join("");this.$ui=t(i),this.$box=e.$ui.find(".qui-confirm-box"),this.$title=e.$ui.find(".qui-confirm-box-title"),this.$icon=e.$ui.find(".qui-confirm-box-content-icon"),this.$text=e.$ui.find(".qui-confirm-box-content-text"),this.$ui.appendTo(document.body)},setUI:function(t){this.$text.html(t.text||""),this.$title.html(t.title||"提示"),this.$icon[0].className="qui-confirm-box-content-icon","ok"http://common1.qyerstatic.com/place/js/map/==t.type?this.$icon.addClass("qui-confirm-box-content-iconOK"):"error"http://common1.qyerstatic.com/place/js/map/==t.type?this.$icon.addClass("qui-confirm-box-content-iconError"):"warning"http://common1.qyerstatic.com/place/js/map/==t.type?this.$icon.addClass("qui-confirm-box-content-iconWarning"):this.$icon.addClass("qui-confirm-box-content-iconWarning")},show:function(){var i={},n={top:0};t.support.leadingWhitespace&&(i.opacity=1,n.opacity=1),this.$ui.css("display","table").animate(i,300,function(){e.$box.animate(n,200)})},hide:function(){var i={top:-30},n={};t.support.leadingWhitespace&&(i.opacity=0,n.opacity=0),this.$box.animate(i,200,function(){e.$ui.animate(n,300,function(){e.$ui.css("display","none")})})}};e.init();var i={confirm:function(t){return e.setUI(t),e.$ui.undelegate("click").delegate(".qui-confirm-okBtn,.qui-confirm-cancelBtn,.qui-confirm-closeIcon","click",function(i){this.className.indexOf("qui-confirm-closeIcon")!=-1||this.className.indexOf("qui-confirm-cancelBtn")!=-1?t.onCancel&&t.onCancel(i):this.className.indexOf("qui-confirm-okBtn")!=-1&&t.onOK&&t.onOK(i),e.hide()}),e.show(),this}};return i}),define("common/widget/poimap/widget-addToPlan",["../widget-service","../../service/poimap/poi-service","common/ui/tip/tip","common/ui/confirm/confirm"],function(t,e,i,n){"use strict";var a=t.createClass({init:function(){$(document.body).off("click.addtoplan"),this.callSuper.apply(this,arguments)},events:[["click.addtoplan","doCollection",".js-favorite-btn"]],doCollection:function(t){var e=$(t.currentTarget||t);this.callAddToPlan(t,{id:e.attr("data-poiId"),planto:e.hasClass(this.constructor.CLASSES.COLLECTIED)?0:1})},callAddToPlan:function(t,e){if(!qyerUtil.isLogin())return void qyerUtil.doLogin();var i=this,a=$(t.currentTarget||t);a.hasClass(this.constructor.CLASSES.COLLECTIED)?n.confirm({text:i.constructor.MSG.TIP,onOK:function(){i.addToPlan(e)},onCancel:function(){return!1}}):i.addToPlan(e)},addToPlan:function(t){e.setPoiCollection($.extend({oper:"planto",type:2},t||{}),$.proxy(this.success,this),$.proxy(this.error,this))},success:function(t){i.tip({text:t.data.msg||($(this.tar).hasClass(this.constructor.CLASSES.COLLECTIED)?this.constructor.MSG.CANCEL:this.constructor.MSG.SUCCESS)})},error:function(t){i.tip({text:t.data.msg||this.constructor.MSG.ERROR})}},{MSG:{SUCCESS:"收藏成功",CANCEL:"取消收藏成功",ERROR:"操作失败",TIP:"确定取消收藏"},CLASSES:{COLLECTIED:"icon-place-heart-fill",UNCOLLECTIED:"icon-place-heart"}});return a}),$(function(){require(["common/widget/poimap/widget-list-container","common/widget/poimap/widget-map-container","common/widget/poimap/widget-addToPlan"],function(t,e,i){var n=new e({$el:".qmap-right",lat:globalCoord.lat,lng:globalCoord.lng});n.on(n.constructor.EVENTS.OTHERMARKERCLICK,function(t,e){var i=n.getPoiByMarker(e);switch(i.type?i.type:i.transporation_tag_type?"transportation":""){case"hotel":qyerUtil.doTrackCode("place-citymap-pin-small-hotel");break;case"food":qyerUtil.doTrackCode("place-citymap-pin-small-food");break;case"transportation":qyerUtil.doTrackCode("place-citymap-pin-transportation");break;default:qyerUtil.doTrackCode("place-citymap-pin-small-visit")}}).on(n.constructor.EVENTS.MARKERCLICK,function(t,e){qyerUtil.doTrackCode("place-citymap-pin-big")}),n.ready(function(){r.list.before("load",function(){n.empty()}),r.list.getCoordinate=function(){var t,e="",i="";if(n.mapAlready&&(t=n.mapUtils.map.getBounds())){var a=t.getSouthWest(),o=t.getNorthEast();e=a.lat()+","+a.lng(),i=o.lat()+","+o.lng()}return{bottom_coordinate:e,top_coordinate:i}},n.addEvent(n.mapUtils.map,"dragend",function(){$(".icon-place-header-search").hasClass("on")||(r.list.isSendCoord=!1,r.list.refresh({page:1}))}),setTimeout(function(){n.addEvent(n.mapUtils.map,"zoom_changed",function(){$(".icon-place-header-search").hasClass("on")||(r.list.isSendCoord=!1,r.list.refresh({page:1}))})},3e3)});var a=!0,o={$el:".qmap-left"};category_id.length>0&&(o.category_id=category_id-0,o.category_name="food"==category_name?"food":"fun");var r=new t(o).on(t.EVENTS.REFRESH,function(t,e){n.ready(function(){n.empty();var t=e&&e.data&&e.data.res&&e.data.res.length&&n.addMarkersByData(e.data.res,a);n.bindMarkersEvent(t),a=!1,setTimeout(function(){n.showOtherCategoryPoi($.extend({type:r.tabs.getCurrentId(),id:PLACE.PID,typename:PLACE.TYPE,bottom_coordinate:"",top_coordinate:""},r.list.getCoordinate()))},100),n.addEvent(t,"mouseover",function(){var t=n.getPoiByMarker(this),e=r.list.$item(t.id);r.list.highlight(e)})})});r.after("setMsg",$.proxy(function(t){$(".icon-place-header-search").hasClass("on")&&t&&t.data&&0==t.data.res.length?$(".msg").html('<div style="text-align:center">没有找到"'+$("#js-search-box").find(".search-input-text").val()+'"，调整一下关键词试试吧~</div>'):$(".icon-place-header-search").hasClass("on")&&t&&t.data&&t.data.res.length>0&&$(".msg").html("").text("全部"+t.data.count+"个")},this)),$("body").on("click",".icon-place-header-search",function(t){r.displaySearch.call(r),n.empty(),$(t.currentTarget).addClass("on"),$(".qmap-nav").find("li").removeClass("on"),r.$msg.html(""),$("#place").find(".msg").text(""),$("#js-search-box").find(".search-input-text").focus()}),r.list.on(r.list.constructor.EVENTS.CHANGE,function(t,e){if(n.mapAlready){var i=$(e),a={id:i.attr("data-id")},o=n;if(!o.currentCard||o.currentCard.poi.id!==a.id){var r=o.getMarkerByPoi(a);o.showBigIcon(r),o.showSimpleCard(r)}}}),r.list.on(r.list.constructor.EVENTS.CLICK,function(t,e){if(n.mapAlready){var i=n.getMarkerByPoi({id:this.getCurrentId()});n.showCard(i)}}),r.on(r.constructor.EVENTS.SEARCHCLEAR,function(){n.empty(),r.list.clearList(),$(".msg").text("")}),r.on(r.constructor.EVENTS.DOSEARCHLIST,function(){r.list.isSendCoord=!0,a=!0,r.list.refresh({page:1,type:"fun",keyword:r.search.$(".search-input-text").val(),cateid:"151,152,153,154,155,156,147,78"})});var s=new i({});s.before("callAddToPlan",$.proxy(function(t,e){this.tar=t.currentTarget||t},s)).after("success",$.proxy(function(){qyerUtil.doTrackCode("place-citymap-visit-mapcard-big-favorite");var t=this,e=$(this.tar),i=e.hasClass(this.constructor.CLASSES.COLLECTIED),n=e.attr("data-poiid");$(".js-favorite-btn[data-poiid="+n+"]").each(function(){$(this)[i?"removeClass":"addClass"](t.constructor.CLASSES.COLLECTIED)[i?"addClass":"removeClass"](t.constructor.CLASSES.UNCOLLECTIED)})},s)),window._addToPlan=$.proxy(function(t,e){s.tar=t,s.doCollection(t),$.isFunction(e)&&e()},s)})}),define("project/js/map-poi-2016",function(){}),function(t){var e=document,i="appendChild",n="styleSheet",a=e.createElement("style");a.type="text/css",e.getElementsByTagName("head")[0][i](a),a[n]?a[n].cssText=t:a[i](e.createTextNode(t))}('.ui_page { float:right;}\n.ui_page_item { display:inline-block; padding:0 6px; vertical-align:middle; font-size:14px; line-height:24px; color:#636363;}\n.ui_page_item:hover { background:#e0f1e1; border-radius:3px; text-decoration:none; color:#323232;}\n.ui_page_item_current, .ui_page_item_current:hover { background:#5ea67c; border-radius:3px; font-weight:700; color:#fff;}\n.ui_page_prev, .ui_page_next { font-size:12px;}\n.ui_page.load { position:relative;}\n.ui_page.load:after { content:\'\'; position:absolute; left:0; top:0; right:0; bottom:0; background-color:#fff; background-color:rgba(255,255,255,0.7);}.qui-select {\n    position: relative;\n    display: inline-block;\n    width: 100px;\n    height: 30px;\n    overflow: visible;\n}\n.qui-select-disable > .titles{\n    background-color: #eee  !important;\n    cursor: default  !important;\n}\n.qui-select .titles {\n    background: url("../../../../common2.qyerstatic.com/place/common/ui/select/icons.png"/*tpa=http://common2.qyerstatic.com/place/common/ui/select/icons.png*/) ;\n    background-repeat: no-repeat;\n    background-position: center right;\n    background-color: #fff;\n    border: 1px solid #C0C0C0;\n    color: #636363;\n    cursor: pointer;\n    display: block;\n    font-size: 14px;\n    line-height: 30px;\n    padding: 0 10px 0 5px;\n    width: 100%;\n    height: 100%;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n.qui-select .titles .title-text {\n    background-position: 0 -4px;\n    margin-left: 5px;\n    white-space: nowrap;\n}\n.qui-select .contents {\n    background-color: #FFFFFF;\n    border: 1px solid #C0C0C0;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n    display: none;\n    line-height: 38px;\n    position: absolute;\n    top: 31px;\n    width: 180px;\n    max-height: 235px;\n    overflow: auto;\n    z-index: 10;\n}\n.qui-select .contents ul li:first-child {\n    border-top: 0 none;\n}\n.qui-select .contents ul li {\n    border-top: 1px solid #EBEBEB;\n    font-size: 14px;\n    line-height: 38px;\n    cursor: pointer;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n.qui-select .contents ul li:hover {\n    background-color: #d9eed7;\n}\n.qui-select .contents ul li a{\n    padding-left: 10px;\n    color: #636363;\n    text-decoration: none;\n}\n \n.qui-inputAutocomplete{\n\tposition: absolute;\n\tz-index: 1100;\n\tbackground-color: #fff;\n\tborder: solid 1px #eee;\n}\n.qui-inputAutocomplete-ul{\n}\n.qui-inputAutocomplete-ul li{\n\theight: 32px;\n\tline-height: 32px;\n\tborder-bottom: solid 1px #eee;\n    background-color: #fff;\n    cursor: pointer;\n    word-break: keep-all;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n.qui-inputAutocomplete-ul li:hover,\n.qui-inputAutocomplete-ul li[data-select=true]{\n\tbackground-color: #e0f1de;\n}\n.qui-inputAutocomplete-ul li.disableDefalut{\n    background-color: #fff !important;\n    cursor: default;\n}\n.qui-inputAutocomplete-noResult{\n\tcolor:red;\n}\n.qyer_inputAutocomplete_name { padding:0 5px 0 10px;}\n.qyer_inputAutocomplete_name .current { color:#077345;}\n.qyer_inputAutocomplete_en { padding-right:10px; font-family:Tahoma, Geneva, sans-serif;}\n.qyer_inputAutocomplete_found { color:#959595; padding-right:10px;}\n.qyer_inputAutocomplete_creat { padding:10px;}.qui-tip{\n\tposition: fixed;\n\ttop: 100px;\n\tleft: 0;\n\twidth: 100%;\n\ttext-align: center;\n\tdisplay: none;\n\tz-index: 1100;\n}\n.qui-tip-box{\n\tdisplay: inline-block;\n\tmin-width:120px;\n\tmax-width:390px;\n\tpadding:20px 30px;\n\tbackground-color:#fff;\n\tbox-shadow: 0 2px 7px rgba(0,0,0,0.25);\n\tborder: solid 1px #c0c0c0;\n\ttext-align:left;\n\tfont-size: 18px;\n\tline-height: 32px;\n}\n.qui-tip-text { display:block; position:relative; padding-left:34px;}\n.qui-tip-text:before { content:\'\'; position:absolute; left:0; top:4px; width:24px; height:24px; background:#fff url(http://common2.qyerstatic.com/place/common/ui/tip/icons2.png) no-repeat;}\n.qui-tip-box-error .qui-tip-text:before { background-position:0 -80px;}\n.qui-tip-box-warning .qui-tip-text:before { background-position:0 -40px;}.qui-confirm{\n\tposition: fixed;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image:url(http://static.qyer.com/models/common/images/bg_255_255_255_0.7.png);\n\tdisplay: table;\n\tz-index: 1200;\n\tdisplay: none;\n\topacity: 0;\n}\n.qui-confirm > div{\n\tdisplay: table-cell;\n\tvertical-align:middle;\n}\n.qui-confirm-box{\n\tmargin: 0 auto;\n\twidth: 300px;\n\tposition: relative;\n\ttop:-50px;\n\topacity: 0;\n\toverflow: hidden;\n\tbox-shadow: 0px 0px 6px #aaa;\n    border: solid 1px #ccc;\n    background-color: #fff;\n}\n.qui-confirm-box-title{\n    height: 30px;\n    color: #666;\n    line-height: 30px;\n    margin-bottom: 20px;\n    padding-left: 20px;\n    font-weight: bold;\n}\n.qui-confirm-box-content{\n\tposition: relative;\n}\n.qui-confirm-box-content-icon{\n\tfloat: left;\n\tbackground-image: url("../../../../static.qyer.com/models/common/ui/confirm/icons.png"/*tpa=http://static.qyer.com/models/common/ui/confirm/icons.png*/);\n\tbackground-repeat: no-repeat;\n    height: 32px;\n    margin: -16px 0 0 10px;\n    position: absolute;\n    top: 50%;\n    vertical-align: middle;\n    width: 32px;\n}\n.qui-confirm-box-content-iconOK{\n\tbackground-position: 0px -67px;\n}\n.qui-confirm-box-content-iconError{\n\tbackground-position: 0px -12px;\n}\n.qui-confirm-box-content-iconWarning{\n\tbackground-position: 0px -121px;\n}\n.qui-confirm-box-content-text{\n\tcolor: #666;\n\theight: 100%;\n\tmargin: 0 20px 0 60px;\n}\n.qui-confirm-box-bottom{\n\tbackground-color: #fff;\n\ttext-align: right;\n\theight: 50px;\n\tline-height: 50px;\n\tpadding-right: 20px;\n}\n.qui-confirm-okBtn{}\n.qui-confirm-cancelBtn{}\n.qui-confirm-closeIcon{\n\tposition: absolute;\n\tright: 10px;\n\ttop: 10px;\t\n\tcursor: pointer;\n\tbackground-image: url("../../../../static.qyer.com/models/common/ui/confirm/icons.png"/*tpa=http://static.qyer.com/models/common/ui/confirm/icons.png*/);\n\theight: 32px;\n\twidth: 32px;\n\tbackground-repeat: no-repeat;\n\tbackground-position:0px -192px;\n\tborder-radius: 5px;\n}\n.qui-confirm-closeIcon:hover{\n\tbackground-position: 0px -230px;\n}\n.qui-confirm-box-clearFloat{\n\tclear: both;\n\theight:0px;\n\toverflow: hidden;\n}\n');