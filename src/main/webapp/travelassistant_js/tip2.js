define(["css!web_old_tip2"],function(){var i={list:[],getTipByID:function(i){for(var t=0;t<this.list.length;t++)if(this.list[t].__id__==i)return this.list[t]},addTip:function(i){for(var t="__tip2__"+(new Date).valueOf();this.getTipByID(t);)t="__tip2__"+(new Date).valueOf();return i.__id__=t,this.list.push(i),this.addToUI(i),t},addToUI:function(t){var e,o,s;if(e=['<div id="'+t.__id__+'"  class="qui-tip2 borderbox '+(t.img?"":"qui-tip2-noImg")+'" >',t.img?'<img class="qui-tip2-img" src="'+t.img+'" width="42" height="42" />':"",'<div class="qui-tip2-text js_qui_tip2" data-id="'+t.__id__+'">'+t.text+"</div>",t.hasCloseIcon===!1?"":'<div class="qui-tip2-closeIcon js_qui_tip2" data-id="'+t.__id__+'"></div>',"</div>"].join(""),e=$(e),1==i.list.length)o=s=70;else{var n;n=$("#"+i.list[i.list.length-2].__id__),o=n.data("top")?n.data("top")+n.outerHeight()+15:parseInt(n.css("top"))+n.outerHeight()+15,s=n.css("right"),o+70>$(document).outerHeight()&&(o=70,s=parseInt(s,10),s+=n.outerWidth()+15),n=null}if(e.css({top:o,right:s}),$(document.body).append(e),t.onShow&&t.onShow.call(t),e.animate({opacity:1},300),t.showTime){var a=t.__id__;setTimeout(function(){i.removeTip(a),a=null},t.showTime)}e=o=s=null},removeTip:function(i){var t=this.getTipByID(i);t&&(t.onClose&&t.onClose.call(t),this.removeFromUI(t.__id__),this.list.splice(this.list.indexOf(t),1)),t=null},removeFromUI:function(i){var t,e,o,s,n,a=this;$("#"+i).animate({opacity:0},300,function(){for($(this).remove(),t=0,e=a.list.length;e>t;t++)o=$("#"+a.list[t].__id__),0===t?70!==parseInt(o.css("top"))&&o.data("top",70).animate({top:"70px"}):(s=$("#"+a.list[t-1].__id__),n=s.data("top")+s.outerHeight()+15,o.data("top",n),parseInt(o.css("top"))!==n&&o.animate({top:n+"px"}))})},bindDocEvt:function(){$(document).on("click",".js_qui_tip2",function(t){var e,o,s;e=$(this),o=e.attr("data-id"),e.hasClass("qui-tip2-closeIcon")?i.removeTip(o):e.hasClass("qui-tip2-text")&&(s=i.getTipByID(o),s.onClick&&s.onClick.call(s)),e=o=s=null})}};i.bindDocEvt();var t={addTip:function(t){return t.showTime=0|t.showTime,i.addTip(t)},removeTip:function(t){i.removeTip(t)}};return t});